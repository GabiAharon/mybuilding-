<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="theme-color" content="#D4785C">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <title>MyBuilding - 专砖</title>

    <!-- Load config (contains admin emails - gitignored) -->
    <script src="config.js"></script>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Fraunces:opsz,wght@9..144,400;9..144,600;9..144,700&family=Rubik:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <style>
        /* ============================================
           CSS CUSTOM PROPERTIES
           ============================================ */
        :root {
            --color-primary: #D4785C;
            --color-primary-dark: #B8614A;
            --color-primary-light: #E8A18C;
            --color-secondary: #2D5A4A;
            --color-secondary-light: #3D7A64;

            --color-cream: #FFF9F5;
            --color-sand: #F5E6D8;
            --color-sand-dark: #E8D4C4;
            --color-text: #3D2E2A;
            --color-text-muted: #8B7355;
            --color-text-light: #B8A090;

            --color-success: #4A9D7C;
            --color-success-bg: #E8F5F0;
            --color-danger: #C75D5D;
            --color-danger-bg: #FCF0F0;
            --color-warning: #D4A85C;
            --color-warning-bg: #FDF8F0;

            --space-xs: 4px;
            --space-sm: 8px;
            --space-md: 16px;
            --space-lg: 24px;
            --space-xl: 32px;
            --space-2xl: 48px;
            --space-3xl: 64px;

            --radius-sm: 8px;
            --radius-md: 16px;
            --radius-lg: 24px;
            --radius-xl: 32px;
            --radius-full: 9999px;

            --shadow-sm: 0 2px 8px rgba(61, 46, 42, 0.06);
            --shadow-md: 0 4px 16px rgba(61, 46, 42, 0.08);
            --shadow-lg: 0 8px 32px rgba(61, 46, 42, 0.12);
            --shadow-glow: 0 0 40px rgba(212, 120, 92, 0.2);

            --font-display: 'Fraunces', serif;
            --font-body: 'Rubik', sans-serif;

            --safe-top: env(safe-area-inset-top, 0px);
            --safe-bottom: env(safe-area-inset-bottom, 0px);

            --ease-out-expo: cubic-bezier(0.16, 1, 0.3, 1);
            --ease-out-back: cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        /* ============================================
           RESET & BASE
           ============================================ */
        *, *::before, *::after {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            font-size: 16px;
            -webkit-font-smoothing: antialiased;
        }

        body {
            font-family: var(--font-body);
            background: var(--color-cream);
            color: var(--color-text);
            min-height: 100vh;
            min-height: 100dvh;
            overflow-x: hidden;
            line-height: 1.5;
        }

        [dir="rtl"] { text-align: right; }
        [dir="ltr"] { text-align: left; }

        #root {
            min-height: 100vh;
            min-height: 100dvh;
        }

        /* ============================================
           APP CONTAINER
           ============================================ */
        .app-container {
            min-height: 100vh;
            min-height: 100dvh;
            max-width: 430px;
            margin: 0 auto;
            background: var(--color-cream);
            position: relative;
            display: flex;
            flex-direction: column;
        }

        /* ============================================
           BACKGROUND DECORATIONS
           ============================================ */
        .bg-decoration {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            pointer-events: none;
            overflow: hidden;
            z-index: 0;
        }

        .bg-blob {
            position: absolute;
            border-radius: 50%;
            filter: blur(80px);
            opacity: 0.5;
        }

        .bg-blob-1 {
            width: 300px;
            height: 300px;
            background: var(--color-primary-light);
            top: -100px;
            right: -100px;
            animation: float 20s ease-in-out infinite;
        }

        .bg-blob-2 {
            width: 250px;
            height: 250px;
            background: var(--color-secondary-light);
            bottom: 20%;
            left: -80px;
            animation: float 25s ease-in-out infinite reverse;
            opacity: 0.3;
        }

        .bg-blob-3 {
            width: 200px;
            height: 200px;
            background: var(--color-sand-dark);
            bottom: -50px;
            right: 20%;
            animation: float 18s ease-in-out infinite 5s;
            opacity: 0.6;
        }

        @keyframes float {
            0%, 100% { transform: translate(0, 0) scale(1); }
            33% { transform: translate(30px, -30px) scale(1.05); }
            66% { transform: translate(-20px, 20px) scale(0.95); }
        }

        /* ============================================
           WELCOME SCREEN
           ============================================ */
        .welcome-screen {
            flex: 1;
            display: flex;
            flex-direction: column;
            padding: var(--space-xl);
            padding-top: calc(var(--safe-top) + var(--space-3xl));
            padding-bottom: calc(var(--safe-bottom) + var(--space-xl));
            position: relative;
            z-index: 1;
        }

        .welcome-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }

        .logo-container {
            margin-bottom: var(--space-xl);
            animation: logoReveal 1s var(--ease-out-expo) forwards;
            opacity: 0;
            transform: scale(0.8);
        }

        @keyframes logoReveal {
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        .logo {
            width: 120px;
            height: 120px;
            background: linear-gradient(135deg, var(--color-primary) 0%, var(--color-primary-dark) 100%);
            border-radius: var(--radius-xl);
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: var(--shadow-lg), var(--shadow-glow);
            position: relative;
        }

        .logo::before {
            content: '';
            position: absolute;
            inset: -4px;
            border-radius: calc(var(--radius-xl) + 4px);
            background: linear-gradient(135deg, rgba(255,255,255,0.3), transparent);
            z-index: -1;
        }

        .logo-icon {
            font-size: 3.5rem;
        }

        .welcome-title {
            font-family: var(--font-display);
            font-size: 2rem;
            font-weight: 700;
            color: var(--color-text);
            margin-bottom: var(--space-sm);
            animation: slideUp 0.8s var(--ease-out-expo) 0.2s forwards;
            opacity: 0;
            transform: translateY(20px);
        }

        .welcome-subtitle {
            font-size: 1rem;
            color: var(--color-text-muted);
            max-width: 280px;
            animation: slideUp 0.8s var(--ease-out-expo) 0.3s forwards;
            opacity: 0;
            transform: translateY(20px);
        }

        @keyframes slideUp {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .welcome-actions {
            width: 100%;
            display: flex;
            flex-direction: column;
            gap: var(--space-md);
            animation: slideUp 0.8s var(--ease-out-expo) 0.4s forwards;
            opacity: 0;
            transform: translateY(20px);
        }

        /* ============================================
           BUTTONS
           ============================================ */
        .btn {
            width: 100%;
            padding: var(--space-md) var(--space-lg);
            border-radius: var(--radius-md);
            font-family: var(--font-body);
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s var(--ease-out-expo);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: var(--space-sm);
            border: none;
            position: relative;
            overflow: hidden;
        }

        .btn::before {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(135deg, rgba(255,255,255,0.2) 0%, transparent 50%);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .btn:hover::before {
            opacity: 1;
        }

        .btn:active {
            transform: scale(0.98);
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--color-primary) 0%, var(--color-primary-dark) 100%);
            color: white;
            box-shadow: var(--shadow-md), 0 4px 20px rgba(212, 120, 92, 0.3);
        }

        .btn-primary:hover {
            box-shadow: var(--shadow-lg), 0 8px 30px rgba(212, 120, 92, 0.4);
            transform: translateY(-2px);
        }

        .btn-secondary {
            background: white;
            color: var(--color-text);
            border: 2px solid var(--color-sand-dark);
        }

        .btn-secondary:hover {
            border-color: var(--color-primary-light);
            background: var(--color-cream);
        }

        .btn-text {
            background: transparent;
            color: var(--color-primary);
            padding: var(--space-sm);
        }

        .btn-text:hover {
            color: var(--color-primary-dark);
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none !important;
        }

        /* ============================================
           AUTH SCREENS
           ============================================ */
        .auth-screen {
            flex: 1;
            display: flex;
            flex-direction: column;
            padding: var(--space-lg);
            padding-top: calc(var(--safe-top) + var(--space-lg));
            padding-bottom: calc(var(--safe-bottom) + var(--space-lg));
            position: relative;
            z-index: 1;
        }

        .auth-header {
            display: flex;
            align-items: center;
            gap: var(--space-md);
            margin-bottom: var(--space-xl);
        }

        .back-btn {
            width: 44px;
            height: 44px;
            border-radius: var(--radius-md);
            background: white;
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: var(--shadow-sm);
            transition: all 0.3s var(--ease-out-expo);
            color: var(--color-text);
        }

        .back-btn:hover {
            background: var(--color-sand);
            transform: translateX(4px);
        }

        [dir="ltr"] .back-btn:hover {
            transform: translateX(-4px);
        }

        .back-btn svg {
            width: 20px;
            height: 20px;
        }

        [dir="ltr"] .back-btn svg {
            transform: rotate(180deg);
        }

        .auth-title {
            font-family: var(--font-display);
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--color-text);
        }

        .auth-content {
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .auth-description {
            color: var(--color-text-muted);
            font-size: 0.9375rem;
            margin-bottom: var(--space-xl);
            line-height: 1.6;
        }

        /* ============================================
           FORM ELEMENTS
           ============================================ */
        .form-group {
            margin-bottom: var(--space-lg);
        }

        .form-label {
            display: block;
            font-size: 0.875rem;
            font-weight: 600;
            color: var(--color-text);
            margin-bottom: var(--space-sm);
        }

        .form-input {
            width: 100%;
            padding: var(--space-md);
            border: 2px solid var(--color-sand-dark);
            border-radius: var(--radius-md);
            font-family: var(--font-body);
            font-size: 1rem;
            color: var(--color-text);
            background: white;
            transition: all 0.3s var(--ease-out-expo);
            outline: none;
        }

        .form-input::placeholder {
            color: var(--color-text-light);
        }

        .form-input:focus {
            border-color: var(--color-primary);
            box-shadow: 0 0 0 4px rgba(212, 120, 92, 0.1);
        }

        .form-input.error {
            border-color: var(--color-danger);
        }

        .form-input.error:focus {
            box-shadow: 0 0 0 4px rgba(199, 93, 93, 0.1);
        }

        .form-error {
            color: var(--color-danger);
            font-size: 0.8125rem;
            margin-top: var(--space-xs);
            display: flex;
            align-items: center;
            gap: var(--space-xs);
        }

        .form-hint {
            color: var(--color-text-light);
            font-size: 0.8125rem;
            margin-top: var(--space-xs);
        }

        /* Password Input */
        .password-input-wrapper {
            position: relative;
        }

        .password-toggle {
            position: absolute;
            left: var(--space-md);
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            color: var(--color-text-light);
            cursor: pointer;
            padding: var(--space-xs);
            display: flex;
            align-items: center;
            justify-content: center;
            transition: color 0.3s ease;
        }

        [dir="ltr"] .password-toggle {
            left: auto;
            right: var(--space-md);
        }

        .password-toggle:hover {
            color: var(--color-text-muted);
        }

        .password-toggle svg {
            width: 20px;
            height: 20px;
        }

        .password-input-wrapper .form-input {
            padding-left: calc(var(--space-md) + 32px);
        }

        [dir="ltr"] .password-input-wrapper .form-input {
            padding-left: var(--space-md);
            padding-right: calc(var(--space-md) + 32px);
        }

        /* Select Input */
        .form-select {
            appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 24 24' fill='none' stroke='%238B7355' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: left var(--space-md) center;
            padding-left: calc(var(--space-md) + 28px);
        }

        [dir="ltr"] .form-select {
            background-position: right var(--space-md) center;
            padding-left: var(--space-md);
            padding-right: calc(var(--space-md) + 28px);
        }

        /* Radio Group */
        .radio-group {
            display: flex;
            gap: var(--space-md);
        }

        .radio-option {
            flex: 1;
        }

        .radio-input {
            display: none;
        }

        .radio-label {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: var(--space-sm);
            padding: var(--space-md);
            background: white;
            border: 2px solid var(--color-sand-dark);
            border-radius: var(--radius-md);
            cursor: pointer;
            transition: all 0.3s var(--ease-out-expo);
            text-align: center;
        }

        .radio-input:checked + .radio-label {
            border-color: var(--color-primary);
            background: rgba(212, 120, 92, 0.05);
        }

        .radio-label:hover {
            border-color: var(--color-primary-light);
        }

        .radio-icon {
            font-size: 1.5rem;
        }

        .radio-text {
            font-weight: 600;
            font-size: 0.875rem;
            color: var(--color-text);
        }

        .radio-desc {
            font-size: 0.75rem;
            color: var(--color-text-muted);
        }

        /* ============================================
           PROGRESS STEPS
           ============================================ */
        .progress-steps {
            display: flex;
            justify-content: center;
            gap: var(--space-sm);
            margin-bottom: var(--space-xl);
        }

        .progress-step {
            width: 40px;
            height: 4px;
            border-radius: var(--radius-full);
            background: var(--color-sand-dark);
            transition: all 0.5s var(--ease-out-expo);
        }

        .progress-step.active {
            background: var(--color-primary);
            width: 60px;
        }

        .progress-step.completed {
            background: var(--color-success);
        }

        /* ============================================
           DIVIDER
           ============================================ */
        .divider {
            display: flex;
            align-items: center;
            gap: var(--space-md);
            margin: var(--space-lg) 0;
        }

        .divider-line {
            flex: 1;
            height: 1px;
            background: var(--color-sand-dark);
        }

        .divider-text {
            font-size: 0.8125rem;
            color: var(--color-text-light);
        }

        /* ============================================
           SOCIAL LOGIN
           ============================================ */
        .social-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: var(--space-sm);
            width: 100%;
            padding: var(--space-md);
            background: white;
            border: 2px solid var(--color-sand-dark);
            border-radius: var(--radius-md);
            font-family: var(--font-body);
            font-size: 0.9375rem;
            font-weight: 500;
            color: var(--color-text);
            cursor: pointer;
            transition: all 0.3s var(--ease-out-expo);
        }

        .social-btn:hover {
            border-color: var(--color-text-light);
            background: var(--color-cream);
        }

        .social-btn svg {
            width: 20px;
            height: 20px;
        }

        /* ============================================
           PENDING SCREEN
           ============================================ */
        .pending-screen {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: var(--space-xl);
            text-align: center;
            position: relative;
            z-index: 1;
        }

        .pending-icon {
            width: 120px;
            height: 120px;
            background: var(--color-warning-bg);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: var(--space-xl);
            position: relative;
        }

        .pending-icon::before {
            content: '';
            position: absolute;
            inset: -8px;
            border-radius: 50%;
            border: 2px dashed var(--color-warning);
            animation: spin 20s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .pending-icon-inner {
            font-size: 3rem;
        }

        .pending-title {
            font-family: var(--font-display);
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--color-text);
            margin-bottom: var(--space-sm);
        }

        .pending-text {
            color: var(--color-text-muted);
            font-size: 0.9375rem;
            max-width: 300px;
            margin-bottom: var(--space-xl);
            line-height: 1.6;
        }

        .pending-info {
            background: white;
            border-radius: var(--radius-md);
            padding: var(--space-lg);
            width: 100%;
            max-width: 320px;
            box-shadow: var(--shadow-sm);
        }

        .pending-info-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: var(--space-sm) 0;
        }

        .pending-info-row:not(:last-child) {
            border-bottom: 1px solid var(--color-sand);
        }

        .pending-info-label {
            font-size: 0.875rem;
            color: var(--color-text-muted);
        }

        .pending-info-value {
            font-weight: 600;
            color: var(--color-text);
        }

        /* ============================================
           LANGUAGE TOGGLE
           ============================================ */
        .language-toggle-float {
            position: absolute;
            top: calc(var(--safe-top) + var(--space-lg));
            left: var(--space-lg);
            background: white;
            border: none;
            padding: var(--space-xs) var(--space-md);
            border-radius: var(--radius-full);
            font-family: var(--font-body);
            font-size: 0.75rem;
            font-weight: 600;
            color: var(--color-text-muted);
            cursor: pointer;
            transition: all 0.3s var(--ease-out-expo);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            box-shadow: var(--shadow-sm);
            z-index: 10;
        }

        [dir="ltr"] .language-toggle-float {
            left: auto;
            right: var(--space-lg);
        }

        .language-toggle-float:hover {
            background: var(--color-sand);
            color: var(--color-text);
        }

        /* ============================================
           ANIMATIONS
           ============================================ */
        .fade-in {
            animation: fadeIn 0.5s var(--ease-out-expo) forwards;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .slide-in {
            animation: slideIn 0.5s var(--ease-out-expo) forwards;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(-20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        [dir="ltr"] .slide-in {
            animation-name: slideInLTR;
        }

        @keyframes slideInLTR {
            from {
                opacity: 0;
                transform: translateX(20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        /* ============================================
           RESPONSIVE
           ============================================ */
        @media (min-width: 768px) {
            .app-container {
                border-radius: var(--radius-xl);
                margin-top: var(--space-xl);
                margin-bottom: var(--space-xl);
                box-shadow: var(--shadow-lg);
                min-height: calc(100vh - var(--space-xl) * 2);
                max-height: 800px;
            }
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <script type="text/babel">
        const { useState, useEffect, createContext, useContext } = React;

        // ============================================
        // TRANSLATIONS
        // ============================================
        const translations = {
            he: {
                welcome: {
                    title: 'MyBuilding',
                    subtitle: '  . 拽 转. 转 .',
                    login: '转专转',
                    register: '专砖 砖',
                    guest: '砖 专'
                },
                login: {
                    title: '转专转',
                    description: '!  专转 转 砖.  转 驻专 住 砖.',
                    email: '',
                    emailPlaceholder: 'your@email.com',
                    password: '住住',
                    passwordPlaceholder: '住住 砖',
                    forgot: '砖转 住住?',
                    submit: '转专',
                    noAccount: '  砖?',
                    register: '专砖 注砖',
                    or: '',
                    google: '砖 注 Google',
                    errors: {
                        email: '  转转  转拽',
                        password: '住住 转  驻转 6 转'
                    }
                },
                register: {
                    step1: {
                        title: '爪专转 砖',
                        description: ' 转!  转 驻专 住 砖.',
                        email: '',
                        emailPlaceholder: 'your@email.com',
                        password: '住住',
                        passwordPlaceholder: '专 住住 拽',
                        passwordHint: '驻转 6 转',
                        confirmPassword: '转 住住',
                        confirmPlaceholder: '拽 砖 转 住住',
                        next: '砖',
                        haveAccount: '专 砖  砖?',
                        login: '转专',
                        errors: {
                            email: '  转转  转拽',
                            password: '住住 转  驻转 6 转',
                            confirm: '住住转  转转'
                        }
                    },
                    step2: {
                        title: '驻专 砖',
                        description: ' 驻专 住驻  砖 转 转 .',
                        fullName: '砖 ',
                        fullNamePlaceholder: '砖专 砖专',
                        phone: '住驻专 驻',
                        phonePlaceholder: '050-1234567',
                        apartment: '住驻专 专',
                        apartmentPlaceholder: ': 12',
                        building: '砖 ',
                        buildingPlaceholder: '专 ',
                        status: '住住',
                        owner: '注',
                        ownerDesc: '专 注转',
                        tenant: '砖专',
                        tenantDesc: ' 砖专 转 专',
                        submit: '砖 拽砖',
                        errors: {
                            fullName: '  砖 ',
                            phone: '  住驻专 驻 转拽',
                            apartment: '  住驻专 专',
                            building: ' 专 '
                        }
                    }
                },
                pending: {
                    title: '转 砖专',
                    text: '拽砖 砖 砖 注 转. 专注 砖砖专 转 驻专, 转拽 注 转 住 驻拽爪.',
                    apartment: '专',
                    building: '',
                    status: '住住',
                    statusValue: '转 砖专',
                    logout: '转转拽'
                },
                buildings: [
                    ' ',
                    ' 砖砖',
                    '驻专拽 专拽',
                    ' 爪拽 专'
                ]
            },
            en: {
                welcome: {
                    title: 'MyBuilding',
                    subtitle: 'Smart building management. One community. One home.',
                    login: 'Login',
                    register: 'Create Account',
                    guest: 'Continue as Guest'
                },
                login: {
                    title: 'Login',
                    description: 'Hey! Good to see you again. Enter your credentials.',
                    email: 'Email',
                    emailPlaceholder: 'your@email.com',
                    password: 'Password',
                    passwordPlaceholder: 'Your password',
                    forgot: 'Forgot password?',
                    submit: 'Login',
                    noAccount: "Don't have an account?",
                    register: 'Register now',
                    or: 'or',
                    google: 'Continue with Google',
                    errors: {
                        email: 'Please enter a valid email address',
                        password: 'Password must be at least 6 characters'
                    }
                },
                register: {
                    step1: {
                        title: 'Create Account',
                        description: "Let's get started! Enter your login details.",
                        email: 'Email',
                        emailPlaceholder: 'your@email.com',
                        password: 'Password',
                        passwordPlaceholder: 'Choose a strong password',
                        passwordHint: 'At least 6 characters',
                        confirmPassword: 'Confirm Password',
                        confirmPlaceholder: 'Re-enter your password',
                        next: 'Continue',
                        haveAccount: 'Already have an account?',
                        login: 'Login',
                        errors: {
                            email: 'Please enter a valid email address',
                            password: 'Password must be at least 6 characters',
                            confirm: 'Passwords do not match'
                        }
                    },
                    step2: {
                        title: 'Personal Details',
                        description: 'A few more details so we can identify you in the building.',
                        fullName: 'Full Name',
                        fullNamePlaceholder: 'John Smith',
                        phone: 'Phone Number',
                        phonePlaceholder: '050-1234567',
                        apartment: 'Apartment Number',
                        apartmentPlaceholder: 'e.g., 12',
                        building: 'Building Name',
                        buildingPlaceholder: 'Select building',
                        status: 'Status',
                        owner: 'Owner',
                        ownerDesc: 'I own this apartment',
                        tenant: 'Tenant',
                        tenantDesc: 'I rent this apartment',
                        submit: 'Submit Request',
                        errors: {
                            fullName: 'Please enter your full name',
                            phone: 'Please enter a valid phone number',
                            apartment: 'Please enter apartment number',
                            building: 'Please select a building'
                        }
                    }
                },
                pending: {
                    title: 'Pending Approval',
                    text: 'Your request has been sent to the building committee. Once they verify your details, you will receive a notification and can access the app.',
                    apartment: 'Apartment',
                    building: 'Building',
                    status: 'Status',
                    statusValue: 'Pending Approval',
                    logout: 'Logout'
                },
                buildings: [
                    'Sea Towers',
                    'Sun Towers',
                    'Yarkon Park',
                    'Neve Tzedek Tower'
                ]
            }
        };

        // ============================================
        // LANGUAGE CONTEXT
        // ============================================
        const LanguageContext = createContext();

        const LanguageProvider = ({ children }) => {
            const [lang, setLang] = useState('he');
            const t = translations[lang];
            const isRTL = lang === 'he';

            useEffect(() => {
                document.documentElement.lang = lang;
                document.documentElement.dir = isRTL ? 'rtl' : 'ltr';
            }, [lang, isRTL]);

            const toggleLanguage = () => {
                setLang(prev => prev === 'he' ? 'en' : 'he');
            };

            return (
                <LanguageContext.Provider value={{ lang, t, isRTL, toggleLanguage }}>
                    {children}
                </LanguageContext.Provider>
            );
        };

        const useLanguage = () => useContext(LanguageContext);

        // ============================================
        // ICONS
        // ============================================
        const Icons = {
            ArrowRight: () => (
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                    <line x1="19" y1="12" x2="5" y2="12"></line>
                    <polyline points="12 19 5 12 12 5"></polyline>
                </svg>
            ),
            Eye: () => (
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                    <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                    <circle cx="12" cy="12" r="3"></circle>
                </svg>
            ),
            EyeOff: () => (
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                    <path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"></path>
                    <line x1="1" y1="1" x2="23" y2="23"></line>
                </svg>
            ),
            Google: () => (
                <svg viewBox="0 0 24 24">
                    <path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
                    <path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
                    <path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
                    <path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
                </svg>
            )
        };

        // ============================================
        // WELCOME SCREEN
        // ============================================
        const WelcomeScreen = ({ onLogin, onRegister }) => {
            const { t, toggleLanguage, lang } = useLanguage();

            return (
                <div className="welcome-screen">
                    <button className="language-toggle-float" onClick={toggleLanguage}>
                        {lang === 'he' ? 'EN' : '注'}
                    </button>

                    <div className="welcome-content">
                        <div className="logo-container">
                            <div className="logo">
                                <span className="logo-icon"></span>
                            </div>
                        </div>
                        <h1 className="welcome-title">{t.welcome.title}</h1>
                        <p className="welcome-subtitle">{t.welcome.subtitle}</p>
                    </div>

                    <div className="welcome-actions">
                        <button className="btn btn-primary" onClick={onRegister}>
                            {t.welcome.register}
                        </button>
                        <button className="btn btn-secondary" onClick={onLogin}>
                            {t.welcome.login}
                        </button>
                    </div>
                </div>
            );
        };

        // ============================================
        // LOGIN SCREEN
        // ============================================
        const LoginScreen = ({ onBack, onSuccess, onRegister }) => {
            const { t, toggleLanguage, lang } = useLanguage();
            const [email, setEmail] = useState('');
            const [password, setPassword] = useState('');
            const [showPassword, setShowPassword] = useState(false);
            const [errors, setErrors] = useState({});

            const validateEmail = (email) => /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);

            const handleSubmit = (e) => {
                e.preventDefault();
                const newErrors = {};

                if (!validateEmail(email)) {
                    newErrors.email = t.login.errors.email;
                }
                if (password.length < 6) {
                    newErrors.password = t.login.errors.password;
                }

                setErrors(newErrors);

                if (Object.keys(newErrors).length === 0) {
                    onSuccess();
                }
            };

            return (
                <div className="auth-screen slide-in">
                    <button className="language-toggle-float" onClick={toggleLanguage}>
                        {lang === 'he' ? 'EN' : '注'}
                    </button>

                    <header className="auth-header">
                        <button className="back-btn" onClick={onBack}>
                            <Icons.ArrowRight />
                        </button>
                        <h1 className="auth-title">{t.login.title}</h1>
                    </header>

                    <div className="auth-content">
                        <p className="auth-description">{t.login.description}</p>

                        <form onSubmit={handleSubmit}>
                            <div className="form-group">
                                <label className="form-label">{t.login.email}</label>
                                <input
                                    type="email"
                                    className={`form-input ${errors.email ? 'error' : ''}`}
                                    placeholder={t.login.emailPlaceholder}
                                    value={email}
                                    onChange={(e) => setEmail(e.target.value)}
                                    dir="ltr"
                                />
                                {errors.email && <span className="form-error">{errors.email}</span>}
                            </div>

                            <div className="form-group">
                                <label className="form-label">{t.login.password}</label>
                                <div className="password-input-wrapper">
                                    <input
                                        type={showPassword ? 'text' : 'password'}
                                        className={`form-input ${errors.password ? 'error' : ''}`}
                                        placeholder={t.login.passwordPlaceholder}
                                        value={password}
                                        onChange={(e) => setPassword(e.target.value)}
                                        dir="ltr"
                                    />
                                    <button
                                        type="button"
                                        className="password-toggle"
                                        onClick={() => setShowPassword(!showPassword)}
                                    >
                                        {showPassword ? <Icons.EyeOff /> : <Icons.Eye />}
                                    </button>
                                </div>
                                {errors.password && <span className="form-error">{errors.password}</span>}
                            </div>

                            <button type="button" className="btn btn-text" style={{ marginBottom: 'var(--space-lg)' }}>
                                {t.login.forgot}
                            </button>

                            <button type="submit" className="btn btn-primary">
                                {t.login.submit}
                            </button>
                        </form>

                        <div className="divider">
                            <span className="divider-line"></span>
                            <span className="divider-text">{t.login.or}</span>
                            <span className="divider-line"></span>
                        </div>

                        <button className="social-btn">
                            <Icons.Google />
                            {t.login.google}
                        </button>

                        <p style={{ textAlign: 'center', marginTop: 'var(--space-xl)', color: 'var(--color-text-muted)', fontSize: '0.875rem' }}>
                            {t.login.noAccount}{' '}
                            <button className="btn btn-text" onClick={onRegister} style={{ display: 'inline', padding: 0 }}>
                                {t.login.register}
                            </button>
                        </p>
                    </div>
                </div>
            );
        };

        // ============================================
        // REGISTER STEP 1
        // ============================================
        const RegisterStep1 = ({ onBack, onNext, onLogin }) => {
            const { t, toggleLanguage, lang } = useLanguage();
            const [email, setEmail] = useState('');
            const [password, setPassword] = useState('');
            const [confirmPassword, setConfirmPassword] = useState('');
            const [showPassword, setShowPassword] = useState(false);
            const [errors, setErrors] = useState({});

            const validateEmail = (email) => /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);

            const handleSubmit = (e) => {
                e.preventDefault();
                const newErrors = {};

                if (!validateEmail(email)) {
                    newErrors.email = t.register.step1.errors.email;
                }
                if (password.length < 6) {
                    newErrors.password = t.register.step1.errors.password;
                }
                if (password !== confirmPassword) {
                    newErrors.confirm = t.register.step1.errors.confirm;
                }

                setErrors(newErrors);

                if (Object.keys(newErrors).length === 0) {
                    onNext({ email, password });
                }
            };

            return (
                <div className="auth-screen slide-in">
                    <button className="language-toggle-float" onClick={toggleLanguage}>
                        {lang === 'he' ? 'EN' : '注'}
                    </button>

                    <header className="auth-header">
                        <button className="back-btn" onClick={onBack}>
                            <Icons.ArrowRight />
                        </button>
                        <h1 className="auth-title">{t.register.step1.title}</h1>
                    </header>

                    <div className="progress-steps">
                        <div className="progress-step active"></div>
                        <div className="progress-step"></div>
                    </div>

                    <div className="auth-content">
                        <p className="auth-description">{t.register.step1.description}</p>

                        <form onSubmit={handleSubmit}>
                            <div className="form-group">
                                <label className="form-label">{t.register.step1.email}</label>
                                <input
                                    type="email"
                                    className={`form-input ${errors.email ? 'error' : ''}`}
                                    placeholder={t.register.step1.emailPlaceholder}
                                    value={email}
                                    onChange={(e) => setEmail(e.target.value)}
                                    dir="ltr"
                                />
                                {errors.email && <span className="form-error">{errors.email}</span>}
                            </div>

                            <div className="form-group">
                                <label className="form-label">{t.register.step1.password}</label>
                                <div className="password-input-wrapper">
                                    <input
                                        type={showPassword ? 'text' : 'password'}
                                        className={`form-input ${errors.password ? 'error' : ''}`}
                                        placeholder={t.register.step1.passwordPlaceholder}
                                        value={password}
                                        onChange={(e) => setPassword(e.target.value)}
                                        dir="ltr"
                                    />
                                    <button
                                        type="button"
                                        className="password-toggle"
                                        onClick={() => setShowPassword(!showPassword)}
                                    >
                                        {showPassword ? <Icons.EyeOff /> : <Icons.Eye />}
                                    </button>
                                </div>
                                {errors.password && <span className="form-error">{errors.password}</span>}
                                {!errors.password && <span className="form-hint">{t.register.step1.passwordHint}</span>}
                            </div>

                            <div className="form-group">
                                <label className="form-label">{t.register.step1.confirmPassword}</label>
                                <input
                                    type="password"
                                    className={`form-input ${errors.confirm ? 'error' : ''}`}
                                    placeholder={t.register.step1.confirmPlaceholder}
                                    value={confirmPassword}
                                    onChange={(e) => setConfirmPassword(e.target.value)}
                                    dir="ltr"
                                />
                                {errors.confirm && <span className="form-error">{errors.confirm}</span>}
                            </div>

                            <button type="submit" className="btn btn-primary">
                                {t.register.step1.next}
                            </button>
                        </form>

                        <p style={{ textAlign: 'center', marginTop: 'var(--space-xl)', color: 'var(--color-text-muted)', fontSize: '0.875rem' }}>
                            {t.register.step1.haveAccount}{' '}
                            <button className="btn btn-text" onClick={onLogin} style={{ display: 'inline', padding: 0 }}>
                                {t.register.step1.login}
                            </button>
                        </p>
                    </div>
                </div>
            );
        };

        // ============================================
        // REGISTER STEP 2
        // ============================================
        const RegisterStep2 = ({ onBack, onSubmit, authData }) => {
            const { t, toggleLanguage, lang } = useLanguage();
            const [fullName, setFullName] = useState('');
            const [phone, setPhone] = useState('');
            const [apartment, setApartment] = useState('');
            const [status, setStatus] = useState('owner');
            const [errors, setErrors] = useState({});

            const handleSubmit = (e) => {
                e.preventDefault();
                const newErrors = {};

                if (fullName.trim().length < 2) {
                    newErrors.fullName = t.register.step2.errors.fullName;
                }
                if (phone.length < 9) {
                    newErrors.phone = t.register.step2.errors.phone;
                }
                if (!apartment) {
                    newErrors.apartment = t.register.step2.errors.apartment;
                }

                setErrors(newErrors);

                if (Object.keys(newErrors).length === 0) {
                    onSubmit({
                        ...authData,
                        fullName,
                        phone,
                        apartment,
                        status
                    });
                }
            };

            return (
                <div className="auth-screen slide-in">
                    <button className="language-toggle-float" onClick={toggleLanguage}>
                        {lang === 'he' ? 'EN' : '注'}
                    </button>

                    <header className="auth-header">
                        <button className="back-btn" onClick={onBack}>
                            <Icons.ArrowRight />
                        </button>
                        <h1 className="auth-title">{t.register.step2.title}</h1>
                    </header>

                    <div className="progress-steps">
                        <div className="progress-step completed"></div>
                        <div className="progress-step active"></div>
                    </div>

                    <div className="auth-content">
                        <p className="auth-description">{t.register.step2.description}</p>

                        <form onSubmit={handleSubmit}>
                            <div className="form-group">
                                <label className="form-label">{t.register.step2.fullName}</label>
                                <input
                                    type="text"
                                    className={`form-input ${errors.fullName ? 'error' : ''}`}
                                    placeholder={t.register.step2.fullNamePlaceholder}
                                    value={fullName}
                                    onChange={(e) => setFullName(e.target.value)}
                                />
                                {errors.fullName && <span className="form-error">{errors.fullName}</span>}
                            </div>

                            <div className="form-group">
                                <label className="form-label">{t.register.step2.phone}</label>
                                <input
                                    type="tel"
                                    className={`form-input ${errors.phone ? 'error' : ''}`}
                                    placeholder={t.register.step2.phonePlaceholder}
                                    value={phone}
                                    onChange={(e) => setPhone(e.target.value)}
                                    dir="ltr"
                                />
                                {errors.phone && <span className="form-error">{errors.phone}</span>}
                            </div>

                            <div className="form-group">
                                <label className="form-label">{t.register.step2.apartment}</label>
                                <input
                                    type="text"
                                    className={`form-input ${errors.apartment ? 'error' : ''}`}
                                    placeholder={t.register.step2.apartmentPlaceholder}
                                    value={apartment}
                                    onChange={(e) => setApartment(e.target.value)}
                                    dir="ltr"
                                />
                                {errors.apartment && <span className="form-error">{errors.apartment}</span>}
                            </div>

                            <div className="form-group">
                                <label className="form-label">{t.register.step2.status}</label>
                                <div className="radio-group">
                                    <div className="radio-option">
                                        <input
                                            type="radio"
                                            id="owner"
                                            name="status"
                                            value="owner"
                                            checked={status === 'owner'}
                                            onChange={(e) => setStatus(e.target.value)}
                                            className="radio-input"
                                        />
                                        <label htmlFor="owner" className="radio-label">
                                            <span className="radio-icon"></span>
                                            <span className="radio-text">{t.register.step2.owner}</span>
                                            <span className="radio-desc">{t.register.step2.ownerDesc}</span>
                                        </label>
                                    </div>
                                    <div className="radio-option">
                                        <input
                                            type="radio"
                                            id="tenant"
                                            name="status"
                                            value="tenant"
                                            checked={status === 'tenant'}
                                            onChange={(e) => setStatus(e.target.value)}
                                            className="radio-input"
                                        />
                                        <label htmlFor="tenant" className="radio-label">
                                            <span className="radio-icon"></span>
                                            <span className="radio-text">{t.register.step2.tenant}</span>
                                            <span className="radio-desc">{t.register.step2.tenantDesc}</span>
                                        </label>
                                    </div>
                                </div>
                            </div>

                            <button type="submit" className="btn btn-primary" style={{ marginTop: 'var(--space-lg)' }}>
                                {t.register.step2.submit}
                            </button>
                        </form>
                    </div>
                </div>
            );
        };

        // ============================================
        // PENDING SCREEN
        // ============================================
        const PendingScreen = ({ userData, onLogout }) => {
            const { t, toggleLanguage, lang } = useLanguage();

            return (
                <div className="pending-screen fade-in">
                    <button className="language-toggle-float" onClick={toggleLanguage}>
                        {lang === 'he' ? 'EN' : '注'}
                    </button>

                    <div className="pending-icon">
                        <span className="pending-icon-inner"></span>
                    </div>

                    <h1 className="pending-title">{t.pending.title}</h1>
                    <p className="pending-text">{t.pending.text}</p>

                    <div className="pending-info">
                        <div className="pending-info-row">
                            <span className="pending-info-label">{t.pending.apartment}</span>
                            <span className="pending-info-value">{userData.apartment}</span>
                        </div>
                        <div className="pending-info-row">
                            <span className="pending-info-label">{t.pending.building}</span>
                            <span className="pending-info-value">{userData.building}</span>
                        </div>
                        <div className="pending-info-row">
                            <span className="pending-info-label">{t.pending.status}</span>
                            <span className="pending-info-value" style={{ color: 'var(--color-warning)' }}>
                                {t.pending.statusValue}
                            </span>
                        </div>
                    </div>

                    <button
                        className="btn btn-text"
                        onClick={onLogout}
                        style={{ marginTop: 'var(--space-xl)' }}
                    >
                        {t.pending.logout}
                    </button>
                </div>
            );
        };

        // ============================================
        // MAIN APP
        // ============================================
        const App = () => {
            const [screen, setScreen] = useState('welcome');
            const [authData, setAuthData] = useState({});
            const [userData, setUserData] = useState(null);

            const handleRegisterStep1 = (data) => {
                setAuthData(data);
                setScreen('register2');
            };

            const handleRegisterComplete = (data) => {
                setUserData(data);
                setScreen('pending');
            };

            const handleLoginSuccess = () => {
                // For demo, redirect to dashboard
                window.location.href = 'index.html';
            };

            return (
                <LanguageProvider>
                    <div className="app-container">
                        <div className="bg-decoration">
                            <div className="bg-blob bg-blob-1"></div>
                            <div className="bg-blob bg-blob-2"></div>
                            <div className="bg-blob bg-blob-3"></div>
                        </div>

                        {screen === 'welcome' && (
                            <WelcomeScreen
                                onLogin={() => setScreen('login')}
                                onRegister={() => setScreen('register1')}
                            />
                        )}

                        {screen === 'login' && (
                            <LoginScreen
                                onBack={() => setScreen('welcome')}
                                onSuccess={handleLoginSuccess}
                                onRegister={() => setScreen('register1')}
                            />
                        )}

                        {screen === 'register1' && (
                            <RegisterStep1
                                onBack={() => setScreen('welcome')}
                                onNext={handleRegisterStep1}
                                onLogin={() => setScreen('login')}
                            />
                        )}

                        {screen === 'register2' && (
                            <RegisterStep2
                                onBack={() => setScreen('register1')}
                                onSubmit={handleRegisterComplete}
                                authData={authData}
                            />
                        )}

                        {screen === 'pending' && (
                            <PendingScreen
                                userData={userData}
                                onLogout={() => {
                                    setUserData(null);
                                    setAuthData({});
                                    setScreen('welcome');
                                }}
                            />
                        )}
                    </div>
                </LanguageProvider>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
