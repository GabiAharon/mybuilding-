<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="theme-color" content="#2D5A4A">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <title>MyBuilding - × ×™×”×•×œ</title>

    <!-- Load config (contains admin emails - gitignored) -->
    <script src="config.js"></script>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Fraunces:opsz,wght@9..144,400;9..144,600;9..144,700&family=Rubik:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <style>
        :root {
            --color-primary: #2D5A4A;
            --color-primary-dark: #1E3D32;
            --color-primary-light: #3D7A64;
            --color-accent: #D4785C;
            --color-accent-light: #E8A18C;
            --color-cream: #FFF9F5;
            --color-sand: #F5E6D8;
            --color-sand-dark: #E8D4C4;
            --color-text: #3D2E2A;
            --color-text-muted: #8B7355;
            --color-text-light: #B8A090;
            --color-success: #4A9D7C;
            --color-success-bg: #E8F5F0;
            --color-danger: #C75D5D;
            --color-danger-bg: #FCF0F0;
            --color-warning: #D4A85C;
            --color-warning-bg: #FDF8F0;
            --color-info: #5C8ED4;
            --color-info-bg: #F0F5FC;
            --space-xs: 4px;
            --space-sm: 8px;
            --space-md: 16px;
            --space-lg: 24px;
            --space-xl: 32px;
            --space-2xl: 48px;
            --radius-sm: 8px;
            --radius-md: 16px;
            --radius-lg: 24px;
            --radius-xl: 32px;
            --radius-full: 9999px;
            --shadow-sm: 0 2px 8px rgba(61, 46, 42, 0.06);
            --shadow-md: 0 4px 16px rgba(61, 46, 42, 0.08);
            --shadow-lg: 0 8px 32px rgba(61, 46, 42, 0.12);
            --font-display: 'Fraunces', serif;
            --font-body: 'Rubik', sans-serif;
            --safe-top: env(safe-area-inset-top, 0px);
            --safe-bottom: env(safe-area-inset-bottom, 0px);
            --ease-out-expo: cubic-bezier(0.16, 1, 0.3, 1);
        }

        *, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }
        html { font-size: 16px; -webkit-font-smoothing: antialiased; }
        body {
            font-family: var(--font-body);
            background: #F5F7F6;
            color: var(--color-text);
            min-height: 100vh;
            min-height: 100dvh;
            line-height: 1.5;
        }
        [dir="rtl"] { text-align: right; }
        #root { min-height: 100vh; min-height: 100dvh; }

        .app-container {
            max-width: 430px;
            margin: 0 auto;
            background: #F5F7F6;
            min-height: 100vh;
            min-height: 100dvh;
            position: relative;
        }

        /* Header */
        .page-header {
            background: linear-gradient(135deg, var(--color-primary) 0%, var(--color-primary-dark) 100%);
            padding: var(--space-lg);
            padding-top: calc(var(--safe-top) + var(--space-lg));
            color: white;
        }

        .header-top {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--space-md);
        }

        .page-title {
            font-family: var(--font-display);
            font-size: 1.5rem;
            font-weight: 600;
        }

        .admin-badge {
            background: rgba(255,255,255,0.2);
            padding: var(--space-xs) var(--space-sm);
            border-radius: var(--radius-full);
            font-size: 0.6875rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .building-info {
            font-size: 0.875rem;
            opacity: 0.8;
        }

        /* Stats Cards */
        .stats-row {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: var(--space-sm);
            padding: var(--space-md) var(--space-lg);
            margin-top: calc(var(--space-lg) * -1);
        }

        .stat-card {
            background: white;
            border-radius: var(--radius-md);
            padding: var(--space-md);
            text-align: center;
            box-shadow: var(--shadow-md);
        }

        .stat-value {
            font-family: var(--font-display);
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: var(--space-xs);
        }

        .stat-value.positive { color: var(--color-success); }
        .stat-value.negative { color: var(--color-danger); }
        .stat-value.neutral { color: var(--color-primary); }

        .stat-label {
            font-size: 0.6875rem;
            color: var(--color-text-muted);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        /* Section Tabs */
        .section-tabs {
            display: flex;
            gap: var(--space-sm);
            padding: var(--space-md) var(--space-lg);
            overflow-x: auto;
            scrollbar-width: none;
        }
        .section-tabs::-webkit-scrollbar { display: none; }

        .section-tab {
            padding: var(--space-sm) var(--space-md);
            background: white;
            border: none;
            border-radius: var(--radius-full);
            font-family: var(--font-body);
            font-size: 0.8125rem;
            font-weight: 500;
            color: var(--color-text-muted);
            cursor: pointer;
            transition: all 0.3s var(--ease-out-expo);
            white-space: nowrap;
            flex-shrink: 0;
            display: flex;
            align-items: center;
            gap: var(--space-xs);
        }

        .section-tab.active {
            background: var(--color-primary);
            color: white;
        }

        .tab-badge {
            background: var(--color-danger);
            color: white;
            font-size: 0.625rem;
            padding: 2px 6px;
            border-radius: var(--radius-full);
        }

        .section-tab.active .tab-badge {
            background: white;
            color: var(--color-primary);
        }

        /* Main Content */
        .main-content {
            padding: 0 var(--space-lg);
            padding-bottom: calc(80px + var(--safe-bottom) + var(--space-lg));
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--space-md);
        }

        .section-title {
            font-family: var(--font-display);
            font-size: 1rem;
            font-weight: 600;
        }

        /* ==================== FINANCIAL DASHBOARD ==================== */
        .finance-card {
            background: white;
            border-radius: var(--radius-lg);
            padding: var(--space-lg);
            margin-bottom: var(--space-md);
            box-shadow: var(--shadow-sm);
        }

        .finance-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--space-lg);
        }

        .finance-title {
            font-family: var(--font-display);
            font-size: 1rem;
            font-weight: 600;
        }

        .finance-period {
            font-size: 0.75rem;
            color: var(--color-text-muted);
            background: var(--color-sand);
            padding: var(--space-xs) var(--space-sm);
            border-radius: var(--radius-sm);
        }

        .balance-display {
            text-align: center;
            padding: var(--space-lg) 0;
            margin-bottom: var(--space-lg);
            background: linear-gradient(135deg, var(--color-success-bg) 0%, #D4F0E7 100%);
            border-radius: var(--radius-md);
        }

        .balance-label {
            font-size: 0.75rem;
            color: var(--color-text-muted);
            margin-bottom: var(--space-xs);
        }

        .balance-amount {
            font-family: var(--font-display);
            font-size: 2rem;
            font-weight: 700;
            color: var(--color-success);
        }

        .finance-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: var(--space-md) 0;
            border-bottom: 1px solid var(--color-sand);
        }

        .finance-row:last-child { border-bottom: none; }

        .finance-row-label {
            display: flex;
            align-items: center;
            gap: var(--space-sm);
            font-size: 0.875rem;
        }

        .finance-row-icon {
            width: 32px;
            height: 32px;
            border-radius: var(--radius-sm);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.875rem;
        }

        .finance-row-icon.income { background: var(--color-success-bg); }
        .finance-row-icon.expense { background: var(--color-danger-bg); }

        .finance-row-amount {
            font-weight: 600;
        }

        .finance-row-amount.income { color: var(--color-success); }
        .finance-row-amount.expense { color: var(--color-danger); }

        /* Simple Bar Chart */
        .chart-container {
            margin-top: var(--space-lg);
        }

        .chart-bar-group {
            display: flex;
            align-items: flex-end;
            justify-content: space-around;
            height: 120px;
            padding: var(--space-md) 0;
        }

        .chart-bar {
            width: 40px;
            border-radius: var(--radius-sm) var(--radius-sm) 0 0;
            transition: height 0.5s var(--ease-out-expo);
            position: relative;
        }

        .chart-bar.income { background: var(--color-success); }
        .chart-bar.expense { background: var(--color-danger); }

        .chart-bar-label {
            position: absolute;
            bottom: -24px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 0.625rem;
            color: var(--color-text-muted);
            white-space: nowrap;
        }

        .chart-legend {
            display: flex;
            justify-content: center;
            gap: var(--space-lg);
            margin-top: var(--space-xl);
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: var(--space-xs);
            font-size: 0.75rem;
            color: var(--color-text-muted);
        }

        .legend-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
        }

        .legend-dot.income { background: var(--color-success); }
        .legend-dot.expense { background: var(--color-danger); }

        /* ==================== DEBTORS SECTION ==================== */
        .debtor-card {
            background: white;
            border-radius: var(--radius-md);
            padding: var(--space-md);
            margin-bottom: var(--space-sm);
            box-shadow: var(--shadow-sm);
            display: flex;
            align-items: center;
            gap: var(--space-md);
            animation: slideUp 0.5s var(--ease-out-expo) forwards;
            opacity: 0;
        }

        .debtor-card:nth-child(1) { animation-delay: 0.05s; }
        .debtor-card:nth-child(2) { animation-delay: 0.1s; }
        .debtor-card:nth-child(3) { animation-delay: 0.15s; }
        .debtor-card:nth-child(4) { animation-delay: 0.2s; }

        @keyframes slideUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .debtor-avatar {
            width: 48px;
            height: 48px;
            border-radius: var(--radius-md);
            background: var(--color-danger-bg);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.25rem;
            flex-shrink: 0;
        }

        .debtor-info {
            flex: 1;
            min-width: 0;
        }

        .debtor-name {
            font-weight: 600;
            font-size: 0.9375rem;
            margin-bottom: 2px;
        }

        .debtor-apartment {
            font-size: 0.75rem;
            color: var(--color-text-muted);
        }

        .debtor-amount {
            font-family: var(--font-display);
            font-size: 1rem;
            font-weight: 600;
            color: var(--color-danger);
            margin-bottom: var(--space-xs);
            text-align: left;
        }

        [dir="rtl"] .debtor-amount { text-align: right; }

        .reminder-btn {
            padding: var(--space-xs) var(--space-md);
            background: var(--color-accent);
            color: white;
            border: none;
            border-radius: var(--radius-full);
            font-family: var(--font-body);
            font-size: 0.6875rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s var(--ease-out-expo);
            display: flex;
            align-items: center;
            gap: var(--space-xs);
        }

        .reminder-btn:hover {
            transform: scale(1.05);
            background: var(--color-primary);
        }

        .reminder-btn.sent {
            background: var(--color-success);
            cursor: default;
        }

        /* ==================== EXPENSES SECTION ==================== */
        .expense-card {
            background: white;
            border-radius: var(--radius-md);
            padding: var(--space-md);
            margin-bottom: var(--space-sm);
            box-shadow: var(--shadow-sm);
            animation: slideUp 0.5s var(--ease-out-expo) forwards;
            opacity: 0;
        }

        .expense-card:nth-child(1) { animation-delay: 0.05s; }
        .expense-card:nth-child(2) { animation-delay: 0.1s; }
        .expense-card:nth-child(3) { animation-delay: 0.15s; }

        .expense-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: var(--space-sm);
        }

        .expense-category {
            display: flex;
            align-items: center;
            gap: var(--space-sm);
        }

        .expense-icon {
            width: 36px;
            height: 36px;
            border-radius: var(--radius-sm);
            background: var(--color-sand);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1rem;
        }

        .expense-name {
            font-weight: 600;
            font-size: 0.9375rem;
        }

        .expense-date {
            font-size: 0.75rem;
            color: var(--color-text-light);
        }

        .expense-amount {
            font-family: var(--font-display);
            font-size: 1.125rem;
            font-weight: 600;
            color: var(--color-text);
        }

        .expense-receipt {
            display: flex;
            align-items: center;
            gap: var(--space-xs);
            font-size: 0.75rem;
            color: var(--color-info);
            cursor: pointer;
        }

        .add-expense-btn {
            width: 100%;
            padding: var(--space-md);
            background: white;
            border: 2px dashed var(--color-sand-dark);
            border-radius: var(--radius-md);
            font-family: var(--font-body);
            font-size: 0.875rem;
            font-weight: 500;
            color: var(--color-text-muted);
            cursor: pointer;
            transition: all 0.3s var(--ease-out-expo);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: var(--space-sm);
        }

        .add-expense-btn:hover {
            border-color: var(--color-primary);
            color: var(--color-primary);
            background: rgba(45, 90, 74, 0.02);
        }

        /* ==================== USERS SECTION ==================== */
        .user-card {
            background: white;
            border-radius: var(--radius-md);
            padding: var(--space-md);
            margin-bottom: var(--space-sm);
            box-shadow: var(--shadow-sm);
            display: flex;
            align-items: center;
            gap: var(--space-md);
            animation: slideUp 0.5s var(--ease-out-expo) forwards;
            opacity: 0;
        }

        .user-card:nth-child(1) { animation-delay: 0.05s; }
        .user-card:nth-child(2) { animation-delay: 0.1s; }
        .user-card:nth-child(3) { animation-delay: 0.15s; }
        .user-card:nth-child(4) { animation-delay: 0.2s; }

        .user-avatar {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            background: var(--color-sand);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.25rem;
            flex-shrink: 0;
        }

        .user-avatar.pending { background: var(--color-warning-bg); }

        .user-info { flex: 1; min-width: 0; }

        .user-name {
            font-weight: 600;
            font-size: 0.9375rem;
            margin-bottom: 2px;
        }

        .user-details {
            font-size: 0.75rem;
            color: var(--color-text-muted);
        }

        .user-status {
            font-size: 0.6875rem;
            font-weight: 600;
            padding: var(--space-xs) var(--space-sm);
            border-radius: var(--radius-full);
        }

        .user-status.pending {
            background: var(--color-warning-bg);
            color: var(--color-warning);
        }

        .user-status.active {
            background: var(--color-success-bg);
            color: var(--color-success);
        }

        .user-status.admin {
            background: var(--color-info-bg);
            color: var(--color-info);
        }

        .user-actions {
            display: flex;
            gap: var(--space-xs);
        }

        .user-action-btn {
            width: 36px;
            height: 36px;
            border-radius: var(--radius-sm);
            border: none;
            cursor: pointer;
            font-size: 0.875rem;
            transition: all 0.3s var(--ease-out-expo);
        }

        .user-action-btn.approve {
            background: var(--color-success-bg);
            color: var(--color-success);
        }

        .user-action-btn.reject {
            background: var(--color-danger-bg);
            color: var(--color-danger);
        }

        .user-action-btn:hover {
            transform: scale(1.1);
        }

        /* Filter Pills */
        .filter-pills {
            display: flex;
            gap: var(--space-sm);
            margin-bottom: var(--space-md);
        }

        .filter-pill {
            padding: var(--space-xs) var(--space-md);
            background: white;
            border: none;
            border-radius: var(--radius-full);
            font-family: var(--font-body);
            font-size: 0.75rem;
            font-weight: 500;
            color: var(--color-text-muted);
            cursor: pointer;
            transition: all 0.3s var(--ease-out-expo);
        }

        .filter-pill.active {
            background: var(--color-primary);
            color: white;
        }

        /* Modal */
        .modal-overlay {
            position: fixed;
            inset: 0;
            background: rgba(61, 46, 42, 0.5);
            z-index: 100;
            display: flex;
            align-items: flex-end;
            justify-content: center;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .modal-content {
            background: var(--color-cream);
            width: 100%;
            max-width: 430px;
            max-height: 90vh;
            border-radius: var(--radius-xl) var(--radius-xl) 0 0;
            transform: translateY(100%);
            transition: transform 0.4s var(--ease-out-expo);
            overflow: hidden;
        }

        .modal-overlay.active .modal-content {
            transform: translateY(0);
        }

        .modal-header {
            padding: var(--space-lg);
            border-bottom: 1px solid var(--color-sand);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-title {
            font-family: var(--font-display);
            font-size: 1.25rem;
            font-weight: 600;
        }

        .modal-close {
            width: 36px;
            height: 36px;
            border-radius: var(--radius-sm);
            background: var(--color-sand);
            border: none;
            cursor: pointer;
            font-size: 1.25rem;
            color: var(--color-text-muted);
        }

        .modal-body {
            padding: var(--space-lg);
            overflow-y: auto;
        }

        /* Form */
        .form-group { margin-bottom: var(--space-lg); }

        .form-label {
            display: block;
            font-size: 0.875rem;
            font-weight: 600;
            margin-bottom: var(--space-sm);
        }

        .form-input, .form-select {
            width: 100%;
            padding: var(--space-md);
            border: 2px solid var(--color-sand-dark);
            border-radius: var(--radius-md);
            font-family: var(--font-body);
            font-size: 1rem;
            background: white;
            outline: none;
            transition: all 0.3s var(--ease-out-expo);
        }

        .form-input:focus, .form-select:focus {
            border-color: var(--color-primary);
        }

        .file-upload {
            border: 2px dashed var(--color-sand-dark);
            border-radius: var(--radius-md);
            padding: var(--space-lg);
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .file-upload:hover {
            border-color: var(--color-primary);
        }

        .file-upload-icon { font-size: 2rem; margin-bottom: var(--space-sm); }
        .file-upload-text { font-size: 0.875rem; color: var(--color-text-muted); }

        .btn-submit {
            width: 100%;
            padding: var(--space-md);
            background: linear-gradient(135deg, var(--color-primary) 0%, var(--color-primary-dark) 100%);
            color: white;
            border: none;
            border-radius: var(--radius-md);
            font-family: var(--font-body);
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s var(--ease-out-expo);
        }

        .btn-submit:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        /* Bottom Navigation */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 100%;
            max-width: 430px;
            background: white;
            border-top: 1px solid var(--color-sand);
            padding: var(--space-sm) var(--space-md);
            padding-bottom: calc(var(--safe-bottom) + var(--space-sm));
            display: flex;
            justify-content: space-around;
            z-index: 50;
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: var(--space-xs);
            padding: var(--space-sm) var(--space-md);
            text-decoration: none;
            position: relative;
        }

        .nav-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: 50%;
            transform: translateX(-50%) scaleX(0);
            width: 24px;
            height: 3px;
            background: var(--color-primary);
            border-radius: var(--radius-full);
            transition: transform 0.3s var(--ease-out-expo);
        }

        .nav-item.active::before { transform: translateX(-50%) scaleX(1); }

        .nav-icon {
            font-size: 1.25rem;
            color: var(--color-text-light);
        }

        .nav-item.active .nav-icon { color: var(--color-primary); }

        .nav-label {
            font-size: 0.6875rem;
            font-weight: 500;
            color: var(--color-text-light);
        }

        .nav-item.active .nav-label {
            color: var(--color-primary);
            font-weight: 600;
        }

        /* ==================== ADMINS SECTION ==================== */
        .admin-management-card {
            background: white;
            border-radius: var(--radius-lg);
            padding: var(--space-lg);
            margin-bottom: var(--space-md);
            box-shadow: var(--shadow-sm);
        }

        .admin-section-title {
            font-family: var(--font-display);
            font-size: 0.875rem;
            font-weight: 600;
            color: var(--color-text-muted);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: var(--space-md);
        }

        .admin-list-item {
            display: flex;
            align-items: center;
            gap: var(--space-md);
            padding: var(--space-md);
            background: var(--color-sand);
            border-radius: var(--radius-md);
            margin-bottom: var(--space-sm);
        }

        .admin-list-item.main-admin {
            background: linear-gradient(135deg, var(--color-success-bg) 0%, #D4F0E7 100%);
            border: 2px solid var(--color-success);
        }

        .admin-avatar {
            width: 44px;
            height: 44px;
            border-radius: 50%;
            background: var(--color-primary);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.25rem;
            color: white;
            flex-shrink: 0;
        }

        .admin-list-item.main-admin .admin-avatar {
            background: var(--color-success);
        }

        .admin-info {
            flex: 1;
            min-width: 0;
        }

        .admin-email {
            font-weight: 600;
            font-size: 0.9375rem;
            word-break: break-all;
        }

        .admin-role {
            font-size: 0.75rem;
            color: var(--color-text-muted);
            display: flex;
            align-items: center;
            gap: var(--space-xs);
        }

        .admin-you-badge {
            background: var(--color-primary);
            color: white;
            font-size: 0.625rem;
            padding: 2px 6px;
            border-radius: var(--radius-full);
            font-weight: 600;
        }

        .no-admins-message {
            text-align: center;
            padding: var(--space-lg);
            color: var(--color-text-muted);
            font-size: 0.875rem;
        }

        .invite-section {
            background: var(--color-info-bg);
            border-radius: var(--radius-md);
            padding: var(--space-lg);
            margin-top: var(--space-md);
        }

        .invite-title {
            font-family: var(--font-display);
            font-size: 1rem;
            font-weight: 600;
            margin-bottom: var(--space-sm);
            display: flex;
            align-items: center;
            gap: var(--space-sm);
        }

        .invite-instructions {
            font-size: 0.8125rem;
            color: var(--color-text-muted);
            margin-bottom: var(--space-md);
            line-height: 1.5;
        }

        .invite-link-container {
            background: white;
            border-radius: var(--radius-md);
            padding: var(--space-md);
            margin-bottom: var(--space-md);
            border: 1px solid var(--color-sand-dark);
        }

        .invite-link-text {
            font-family: monospace;
            font-size: 0.75rem;
            color: var(--color-text);
            word-break: break-all;
            margin-bottom: var(--space-sm);
            padding: var(--space-sm);
            background: var(--color-sand);
            border-radius: var(--radius-sm);
        }

        .invite-link-expiry {
            font-size: 0.6875rem;
            color: var(--color-text-light);
            display: flex;
            align-items: center;
            gap: var(--space-xs);
        }

        .btn-generate, .btn-copy {
            width: 100%;
            padding: var(--space-md);
            border: none;
            border-radius: var(--radius-md);
            font-family: var(--font-body);
            font-size: 0.9375rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s var(--ease-out-expo);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: var(--space-sm);
        }

        .btn-generate {
            background: linear-gradient(135deg, var(--color-info) 0%, #4A7AC4 100%);
            color: white;
        }

        .btn-generate:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        .btn-copy {
            background: var(--color-success);
            color: white;
        }

        .btn-copy.copied {
            background: var(--color-primary);
        }

        .btn-copy:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        /* ==================== NOTICES SECTION ==================== */
        .notices-templates-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: var(--space-sm);
            margin-bottom: var(--space-lg);
        }

        .template-card {
            background: white;
            border-radius: var(--radius-md);
            padding: var(--space-md);
            cursor: pointer;
            transition: all 0.3s var(--ease-out-expo);
            border: 2px solid transparent;
            text-align: center;
        }

        .template-card:hover {
            border-color: var(--color-primary);
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        .template-card.selected {
            border-color: var(--color-primary);
            background: rgba(45, 90, 74, 0.05);
        }

        .template-icon {
            font-size: 2rem;
            margin-bottom: var(--space-xs);
        }

        .template-title {
            font-size: 0.75rem;
            font-weight: 600;
            color: var(--color-text);
        }

        .template-type {
            font-size: 0.625rem;
            padding: 2px 6px;
            border-radius: var(--radius-full);
            margin-top: var(--space-xs);
            display: inline-block;
        }

        .template-type.urgent { background: var(--color-danger-bg); color: var(--color-danger); }
        .template-type.event { background: var(--color-info-bg); color: var(--color-info); }
        .template-type.info { background: var(--color-success-bg); color: var(--color-success); }
        .template-type.maintenance { background: var(--color-warning-bg); color: var(--color-warning); }

        .active-notices-list {
            margin-top: var(--space-lg);
        }

        .active-notice-card {
            background: white;
            border-radius: var(--radius-md);
            padding: var(--space-md);
            margin-bottom: var(--space-sm);
            display: flex;
            align-items: center;
            gap: var(--space-md);
            box-shadow: var(--shadow-sm);
        }

        .active-notice-icon {
            font-size: 1.5rem;
        }

        .active-notice-info {
            flex: 1;
        }

        .active-notice-title {
            font-weight: 600;
            font-size: 0.875rem;
        }

        .active-notice-date {
            font-size: 0.75rem;
            color: var(--color-text-muted);
        }

        .btn-delete {
            padding: var(--space-xs) var(--space-sm);
            background: var(--color-danger-bg);
            color: var(--color-danger);
            border: none;
            border-radius: var(--radius-sm);
            cursor: pointer;
            font-size: 0.75rem;
            transition: all 0.3s var(--ease-out-expo);
        }

        .btn-delete:hover {
            background: var(--color-danger);
            color: white;
        }

        .btn-send-notice {
            width: 100%;
            padding: var(--space-md);
            background: linear-gradient(135deg, var(--color-primary) 0%, var(--color-primary-dark) 100%);
            color: white;
            border: none;
            border-radius: var(--radius-md);
            font-family: var(--font-body);
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s var(--ease-out-expo);
            margin-top: var(--space-md);
        }

        .btn-send-notice:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        .btn-send-notice:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .btn-send-notice.sent {
            background: var(--color-success);
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- Supabase Client (for authentication) -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="src/supabase.js"></script>

    <script type="text/babel">
        const { useState, useEffect, createContext, useContext } = React;

        // Translations
        const translations = {
            he: {
                title: '×œ×•×— ×‘×§×¨×”',
                admin: '×ž× ×”×œ',
                building: '×ž×’×“×œ×™ ×”×™×',
                stats: { balance: '×™×ª×¨×”', debtors: '×—×™×™×‘×™×', apartments: '×“×™×¨×•×ª' },
                tabs: { finance: '×›×¡×¤×™×', debtors: '×—×™×™×‘×™×', expenses: '×”×•×¦××•×ª', users: '×ž×©×ª×ž×©×™×', faults: '×ª×§×œ×•×ª', notices: '×”×•×“×¢×•×ª', polls: '×¡×§×¨×™×', professionals: '×× ×©×™ ×ž×§×¦×•×¢', marketplace: '×œ×•×— ×ž×•×“×¢×•×ª', admins: '×ž× ×”×œ×™×' },
                finance: {
                    title: '×¡×™×›×•× ×—×•×“×©×™',
                    period: '×¤×‘×¨×•××¨ 2025',
                    balance: '×™×ª×¨×ª ×§×•×¤×”',
                    income: '×”×›× ×¡×•×ª',
                    expenses: '×”×•×¦××•×ª',
                    legend: { income: '×”×›× ×¡×•×ª', expenses: '×”×•×¦××•×ª' },
                    months: ['×™× ×•', '×¤×‘×¨', '×ž×¨×¥', '××¤×¨']
                },
                debtors: {
                    sendReminder: '×©×œ×— ×ª×–×›×•×¨×ª',
                    sent: '× ×©×œ×—',
                    apartment: '×“×™×¨×”',
                    debt: '×—×•×‘',
                    empty: '××™×Ÿ ×—×™×™×‘×™× ×›×¨×’×¢'
                },
                expenses: {
                    add: '×”×•×¡×£ ×”×•×¦××”',
                    receipt: '×§×‘×œ×” ×ž×¦×•×¨×¤×ª',
                    categories: {
                        cleaning: '× ×™×§×™×•×Ÿ',
                        electricity: '×—×©×ž×œ',
                        water: '×ž×™×',
                        maintenance: '×ª×—×–×•×§×”',
                        gardening: '×’×™× ×•×Ÿ',
                        other: '××—×¨'
                    },
                    form: {
                        title: '×”×•×¦××” ×—×“×©×”',
                        category: '×§×˜×’×•×¨×™×”',
                        amount: '×¡×›×•×',
                        description: '×ª×™××•×¨',
                        receipt: '×§×‘×œ×”',
                        uploadReceipt: '×”×¢×œ×” ×§×‘×œ×”',
                        submit: '×”×•×¡×£ ×”×•×¦××”'
                    },
                    empty: '××™×Ÿ ×”×•×¦××•×ª ×¢×“×™×™×Ÿ'
                },
                users: {
                    filter: { all: '×”×›×œ', pending: '×ž×ž×ª×™× ×™×', active: '×¤×¢×™×œ×™×' },
                    status: { pending: '×ž×ž×ª×™×Ÿ', active: '×¤×¢×™×œ', admin: '×ž× ×”×œ' },
                    apartment: '×“×™×¨×”',
                    approve: '××©×¨',
                    reject: '×“×—×”',
                    empty: '××™×Ÿ ×ž×©×ª×ž×©×™× ×¨×©×•×ž×™× ×¢×“×™×™×Ÿ'
                },
                notices: {
                    title: '×©×œ×™×—×ª ×”×•×“×¢×•×ª',
                    templates: '×ª×‘× ×™×•×ª ×ž×•×›× ×•×ª',
                    active: '×”×•×“×¢×•×ª ×¤×¢×™×œ×•×ª',
                    send: '×©×œ×— ×”×•×“×¢×”',
                    sent: '× ×©×œ×—!',
                    delete: '×ž×—×§',
                    noActive: '××™×Ÿ ×”×•×“×¢×•×ª ×¤×¢×™×œ×•×ª',
                    templateList: [
                        { id: 'water', icon: 'ðŸš°', title: '×”×¤×¡×§×ª ×ž×™× ×ž×ª×•×›× × ×ª', type: 'urgent' },
                        { id: 'elevator', icon: 'ðŸ›—', title: '×ª×—×–×•×§×ª ×ž×¢×œ×™×ª', type: 'maintenance' },
                        { id: 'meeting', icon: 'ðŸ“‹', title: '××¡×™×¤×ª ×“×™×™×¨×™×', type: 'event' },
                        { id: 'cleaning', icon: 'ðŸ§¹', title: '×¢×“×›×•×Ÿ ×©×¢×•×ª × ×™×§×™×•×Ÿ', type: 'info' },
                        { id: 'electricity', icon: 'âš¡', title: '×”×¤×¡×§×ª ×—×©×ž×œ', type: 'urgent' },
                        { id: 'parking', icon: 'ðŸš—', title: '×”×•×“×¢×” ×¢×œ ×—× ×™×”', type: 'info' },
                        { id: 'pest', icon: 'ðŸœ', title: '×”×“×‘×¨×” ×‘×‘× ×™×™×Ÿ', type: 'maintenance' },
                        { id: 'event', icon: 'ðŸŽ‰', title: '××™×¨×•×¢ ×§×”×™×œ×ª×™', type: 'event' }
                    ]
                },
                faults: {
                    title: '× ×™×”×•×œ ×ª×§×œ×•×ª',
                    all: '×›×œ ×”×ª×§×œ×•×ª',
                    open: '×¤×ª×•×—×•×ª',
                    inProgress: '×‘×˜×™×¤×•×œ',
                    fixed: '×˜×•×¤×œ×•',
                    empty: '××™×Ÿ ×ª×§×œ×•×ª',
                    markProgress: '×”×¢×‘×¨ ×œ×˜×™×¤×•×œ',
                    markFixed: '×¡×ž×Ÿ ×›×˜×•×¤×œ',
                    delete: '×ž×—×§'
                },
                polls: {
                    title: '× ×™×”×•×œ ×¡×§×¨×™×',
                    create: '×¦×•×¨ ×¡×§×¨ ×—×“×©',
                    question: '×©××œ×”',
                    options: '××¤×©×¨×•×™×•×ª',
                    addOption: '×”×•×¡×£ ××¤×©×¨×•×ª',
                    active: '×¡×§×¨×™× ×¤×¢×™×œ×™×',
                    ended: '×¡×§×¨×™× ×©×”×¡×ª×™×™×ž×•',
                    votes: '×”×¦×‘×¢×•×ª',
                    close: '×¡×’×•×¨ ×¡×§×¨',
                    delete: '×ž×—×§',
                    empty: '××™×Ÿ ×¡×§×¨×™× ×¤×¢×™×œ×™×',
                    placeholder: '×”×§×œ×“ ××ª ×”×©××œ×”...',
                    optionPlaceholder: '××¤×©×¨×•×ª'
                },
                professionals: {
                    title: '× ×™×”×•×œ ×× ×©×™ ×ž×§×¦×•×¢',
                    add: '×”×•×¡×£ ××™×© ×ž×§×¦×•×¢',
                    name: '×©×',
                    profession: '×ž×§×¦×•×¢',
                    phone: '×˜×œ×¤×•×Ÿ',
                    description: '×ª×™××•×¨',
                    pending: '×ž×ž×ª×™× ×™× ×œ××™×©×•×¨',
                    approved: '×ž××•×©×¨×™×',
                    approve: '××©×¨',
                    reject: '×“×—×”',
                    delete: '×ž×—×§',
                    empty: '××™×Ÿ ×× ×©×™ ×ž×§×¦×•×¢',
                    professions: {
                        plumber: '××™× ×¡×˜×œ×˜×•×¨',
                        electrician: '×—×©×ž×œ××™',
                        handyman: '××™×© ×ª×—×–×•×§×”',
                        cleaner: '×ž× ×§×”',
                        painter: '×¦×‘×¢×™',
                        locksmith: '×ž× ×¢×•×œ×Ÿ',
                        ac: '×ž×™×–×•×’ ××•×•×™×¨',
                        other: '××—×¨'
                    }
                },
                marketplace: {
                    title: '× ×™×”×•×œ ×œ×•×— ×ž×•×“×¢×•×ª',
                    active: '×ž×•×“×¢×•×ª ×¤×¢×™×œ×•×ª',
                    all: '×”×›×œ',
                    sell: '×œ×ž×›×™×¨×”',
                    buy: '×§× ×™×™×”',
                    give: '×œ×ª×ª',
                    seek: '×ž×—×¤×©',
                    delete: '×ž×—×§',
                    empty: '××™×Ÿ ×ž×•×“×¢×•×ª ×¤×¢×™×œ×•×ª',
                    by: '×ž××ª'
                },
                nav: { dashboard: '×‘×§×¨×”', residents: '×“×™×™×¨×™×', faults: '×ª×§×œ×•×ª', settings: '×”×’×“×¨×•×ª', exit: '×™×¦×™××”' },
                admins: {
                    title: '× ×™×”×•×œ ×ž× ×”×œ×™×',
                    mainAdmin: '×ž× ×”×œ ×¨××©×™',
                    additionalAdmins: '×ž× ×”×œ×™× × ×•×¡×¤×™×',
                    noAdditional: '××™×Ÿ ×ž× ×”×œ×™× × ×•×¡×¤×™×',
                    inviteTitle: '×”×–×ž× ×ª ×ž× ×”×œ ×—×“×©',
                    generateLink: '×¦×•×¨ ×§×™×©×•×¨ ×”×–×ž× ×”',
                    copyLink: '×”×¢×ª×§ ×§×™×©×•×¨',
                    copied: '×”×•×¢×ª×§!',
                    linkExpiry: '×”×§×™×©×•×¨ ×ª×§×£ ×œ-24 ×©×¢×•×ª',
                    inviteInstructions: '×©×œ×— ××ª ×”×§×™×©×•×¨ ×œ×ž× ×”×œ ×”×—×“×©. ×œ××—×¨ ×”×¨×™×©×•× ×™×§×‘×œ ×”×¨×©××•×ª ×ž× ×”×œ.',
                    you: '(××ª×”)'
                }
            },
            en: {
                title: 'Dashboard',
                admin: 'Admin',
                building: 'Sea Towers',
                stats: { balance: 'Balance', debtors: 'Debtors', apartments: 'Apartments' },
                tabs: { finance: 'Finance', debtors: 'Debtors', expenses: 'Expenses', users: 'Users', faults: 'Faults', notices: 'Notices', polls: 'Polls', professionals: 'Professionals', marketplace: 'Marketplace', admins: 'Admins' },
                finance: {
                    title: 'Monthly Summary',
                    period: 'February 2025',
                    balance: 'Current Balance',
                    income: 'Income',
                    expenses: 'Expenses',
                    legend: { income: 'Income', expenses: 'Expenses' },
                    months: ['Jan', 'Feb', 'Mar', 'Apr']
                },
                debtors: {
                    sendReminder: 'Send Reminder',
                    sent: 'Sent',
                    apartment: 'Apt',
                    debt: 'Debt',
                    empty: 'No debtors at the moment'
                },
                expenses: {
                    add: 'Add Expense',
                    receipt: 'Receipt attached',
                    categories: {
                        cleaning: 'Cleaning',
                        electricity: 'Electricity',
                        water: 'Water',
                        maintenance: 'Maintenance',
                        gardening: 'Gardening',
                        other: 'Other'
                    },
                    form: {
                        title: 'New Expense',
                        category: 'Category',
                        amount: 'Amount',
                        description: 'Description',
                        receipt: 'Receipt',
                        uploadReceipt: 'Upload Receipt',
                        submit: 'Add Expense'
                    },
                    empty: 'No expenses yet'
                },
                users: {
                    filter: { all: 'All', pending: 'Pending', active: 'Active' },
                    status: { pending: 'Pending', active: 'Active', admin: 'Admin' },
                    apartment: 'Apt',
                    approve: 'Approve',
                    reject: 'Reject',
                    empty: 'No registered users yet'
                },
                notices: {
                    title: 'Send Notices',
                    templates: 'Quick Templates',
                    active: 'Active Notices',
                    send: 'Send Notice',
                    sent: 'Sent!',
                    delete: 'Delete',
                    noActive: 'No active notices',
                    templateList: [
                        { id: 'water', icon: 'ðŸš°', title: 'Planned Water Shutdown', type: 'urgent' },
                        { id: 'elevator', icon: 'ðŸ›—', title: 'Elevator Maintenance', type: 'maintenance' },
                        { id: 'meeting', icon: 'ðŸ“‹', title: 'Residents Meeting', type: 'event' },
                        { id: 'cleaning', icon: 'ðŸ§¹', title: 'Cleaning Hours Update', type: 'info' },
                        { id: 'electricity', icon: 'âš¡', title: 'Power Outage', type: 'urgent' },
                        { id: 'parking', icon: 'ðŸš—', title: 'Parking Notice', type: 'info' },
                        { id: 'pest', icon: 'ðŸœ', title: 'Pest Control', type: 'maintenance' },
                        { id: 'event', icon: 'ðŸŽ‰', title: 'Community Event', type: 'event' }
                    ]
                },
                faults: {
                    title: 'Faults Management',
                    all: 'All Faults',
                    open: 'Open',
                    inProgress: 'In Progress',
                    fixed: 'Fixed',
                    empty: 'No faults',
                    markProgress: 'Mark In Progress',
                    markFixed: 'Mark Fixed',
                    delete: 'Delete'
                },
                polls: {
                    title: 'Polls Management',
                    create: 'Create New Poll',
                    question: 'Question',
                    options: 'Options',
                    addOption: 'Add Option',
                    active: 'Active Polls',
                    ended: 'Ended Polls',
                    votes: 'votes',
                    close: 'Close Poll',
                    delete: 'Delete',
                    empty: 'No active polls',
                    placeholder: 'Enter your question...',
                    optionPlaceholder: 'Option'
                },
                professionals: {
                    title: 'Professionals Management',
                    add: 'Add Professional',
                    name: 'Name',
                    profession: 'Profession',
                    phone: 'Phone',
                    description: 'Description',
                    pending: 'Pending Approval',
                    approved: 'Approved',
                    approve: 'Approve',
                    reject: 'Reject',
                    delete: 'Delete',
                    empty: 'No professionals',
                    professions: {
                        plumber: 'Plumber',
                        electrician: 'Electrician',
                        handyman: 'Handyman',
                        cleaner: 'Cleaner',
                        painter: 'Painter',
                        locksmith: 'Locksmith',
                        ac: 'AC Technician',
                        other: 'Other'
                    }
                },
                marketplace: {
                    title: 'Marketplace Management',
                    active: 'Active Listings',
                    all: 'All',
                    sell: 'For Sale',
                    buy: 'Buying',
                    give: 'Giving Away',
                    seek: 'Seeking',
                    delete: 'Delete',
                    empty: 'No active listings',
                    by: 'by'
                },
                nav: { dashboard: 'Dashboard', residents: 'Residents', faults: 'Faults', settings: 'Settings', exit: 'Exit' },
                admins: {
                    title: 'Admin Management',
                    mainAdmin: 'Main Admin',
                    additionalAdmins: 'Additional Admins',
                    noAdditional: 'No additional admins',
                    inviteTitle: 'Invite New Admin',
                    generateLink: 'Generate Invite Link',
                    copyLink: 'Copy Link',
                    copied: 'Copied!',
                    linkExpiry: 'Link valid for 24 hours',
                    inviteInstructions: 'Send this link to the new admin. They will receive admin permissions after registration.',
                    you: '(You)'
                }
            }
        };

        const LanguageContext = createContext();
        const LanguageProvider = ({ children }) => {
            const [lang, setLang] = useState('he');
            const t = translations[lang];
            const isRTL = lang === 'he';
            useEffect(() => {
                document.documentElement.lang = lang;
                document.documentElement.dir = isRTL ? 'rtl' : 'ltr';
            }, [lang, isRTL]);
            return (
                <LanguageContext.Provider value={{ lang, t, isRTL }}>
                    {children}
                </LanguageContext.Provider>
            );
        };
        const useLanguage = () => useContext(LanguageContext);

        // Mock Data
        // Empty data - will be populated from database
        const mockDebtors = [];
        const mockExpenses = [];
        const mockUsers = [];

        const categoryIcons = {
            cleaning: 'ðŸ§¹',
            electricity: 'âš¡',
            water: 'ðŸ’§',
            maintenance: 'ðŸ”§',
            gardening: 'ðŸŒ¿',
            other: 'ðŸ“‹'
        };

        // Components
        const FinanceSection = () => {
            const { t } = useLanguage();
            const chartData = [
                { month: t.finance.months[0], income: 85, expense: 60 },
                { month: t.finance.months[1], income: 100, expense: 70 },
                { month: t.finance.months[2], income: 90, expense: 55 },
                { month: t.finance.months[3], income: 95, expense: 65 }
            ];

            return (
                <div className="finance-card">
                    <div className="finance-header">
                        <h3 className="finance-title">{t.finance.title}</h3>
                        <span className="finance-period">{t.finance.period}</span>
                    </div>

                    <div className="balance-display">
                        <div className="balance-label">{t.finance.balance}</div>
                        <div className="balance-amount">â‚ª0</div>
                    </div>

                    <div className="finance-row">
                        <div className="finance-row-label">
                            <div className="finance-row-icon income">ðŸ“ˆ</div>
                            <span>{t.finance.income}</span>
                        </div>
                        <span className="finance-row-amount income">+â‚ª0</span>
                    </div>

                    <div className="finance-row">
                        <div className="finance-row-label">
                            <div className="finance-row-icon expense">ðŸ“‰</div>
                            <span>{t.finance.expenses}</span>
                        </div>
                        <span className="finance-row-amount expense">-â‚ª0</span>
                    </div>

                    <div className="chart-container">
                        <div className="chart-bar-group">
                            {chartData.map((data, i) => (
                                <React.Fragment key={i}>
                                    <div className="chart-bar income" style={{ height: `${data.income}%` }}>
                                        <span className="chart-bar-label">{data.month}</span>
                                    </div>
                                    <div className="chart-bar expense" style={{ height: `${data.expense}%` }} />
                                </React.Fragment>
                            ))}
                        </div>
                        <div className="chart-legend">
                            <div className="legend-item">
                                <div className="legend-dot income"></div>
                                <span>{t.finance.legend.income}</span>
                            </div>
                            <div className="legend-item">
                                <div className="legend-dot expense"></div>
                                <span>{t.finance.legend.expenses}</span>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        const DebtorsSection = () => {
            const { t, lang } = useLanguage();
            const [debtors, setDebtors] = useState(mockDebtors);

            const handleRemind = (id) => {
                setDebtors(prev => prev.map(d =>
                    d.id === id ? { ...d, reminded: true } : d
                ));
            };

            if (debtors.length === 0) {
                return (
                    <div className="no-admins-message" style={{ padding: 'var(--space-2xl)', textAlign: 'center' }}>
                        <div style={{ fontSize: '3rem', marginBottom: 'var(--space-md)' }}>âœ…</div>
                        <div>{t.debtors.empty}</div>
                    </div>
                );
            }

            return (
                <div>
                    {debtors.map(debtor => (
                        <div key={debtor.id} className="debtor-card">
                            <div className="debtor-avatar">ðŸ </div>
                            <div className="debtor-info">
                                <div className="debtor-name">{debtor.name[lang]}</div>
                                <div className="debtor-apartment">{t.debtors.apartment} {debtor.apartment}</div>
                            </div>
                            <div>
                                <div className="debtor-amount">â‚ª{debtor.amount.toLocaleString()}</div>
                                <button
                                    className={`reminder-btn ${debtor.reminded ? 'sent' : ''}`}
                                    onClick={() => !debtor.reminded && handleRemind(debtor.id)}
                                >
                                    {debtor.reminded ? `âœ“ ${t.debtors.sent}` : `ðŸ“© ${t.debtors.sendReminder}`}
                                </button>
                            </div>
                        </div>
                    ))}
                </div>
            );
        };

        const ExpensesSection = ({ onAdd }) => {
            const { t, lang } = useLanguage();

            return (
                <div>
                    {mockExpenses.length === 0 ? (
                        <div className="no-admins-message" style={{ padding: 'var(--space-xl)', textAlign: 'center', marginBottom: 'var(--space-md)' }}>
                            <div style={{ fontSize: '3rem', marginBottom: 'var(--space-md)' }}>ðŸ“‹</div>
                            <div>{t.expenses.empty}</div>
                        </div>
                    ) : (
                        mockExpenses.map(expense => (
                            <div key={expense.id} className="expense-card">
                                <div className="expense-header">
                                    <div className="expense-category">
                                        <div className="expense-icon">{categoryIcons[expense.category]}</div>
                                        <div>
                                            <div className="expense-name">{expense.name[lang]}</div>
                                            <div className="expense-date">{expense.date}</div>
                                        </div>
                                    </div>
                                    <div className="expense-amount">â‚ª{expense.amount.toLocaleString()}</div>
                                </div>
                                {expense.hasReceipt && (
                                    <div className="expense-receipt">ðŸ“Ž {t.expenses.receipt}</div>
                                )}
                            </div>
                        ))
                    )}
                    <button className="add-expense-btn" onClick={onAdd}>
                        âž• {t.expenses.add}
                    </button>
                </div>
            );
        };

        const UsersSection = () => {
            const { t, lang } = useLanguage();
            const [filter, setFilter] = useState('all');
            const [users, setUsers] = useState(mockUsers);

            const filteredUsers = filter === 'all'
                ? users
                : users.filter(u => u.status === filter);

            const pendingCount = users.filter(u => u.status === 'pending').length;

            const handleApprove = (id) => {
                setUsers(prev => prev.map(u =>
                    u.id === id ? { ...u, status: 'active' } : u
                ));
            };

            const handleReject = (id) => {
                setUsers(prev => prev.filter(u => u.id !== id));
            };

            if (users.length === 0) {
                return (
                    <div className="no-admins-message" style={{ padding: 'var(--space-2xl)', textAlign: 'center' }}>
                        <div style={{ fontSize: '3rem', marginBottom: 'var(--space-md)' }}>ðŸ‘¥</div>
                        <div>{t.users.empty}</div>
                    </div>
                );
            }

            return (
                <div>
                    <div className="filter-pills">
                        <button
                            className={`filter-pill ${filter === 'all' ? 'active' : ''}`}
                            onClick={() => setFilter('all')}
                        >
                            {t.users.filter.all}
                        </button>
                        <button
                            className={`filter-pill ${filter === 'pending' ? 'active' : ''}`}
                            onClick={() => setFilter('pending')}
                        >
                            {t.users.filter.pending} ({pendingCount})
                        </button>
                        <button
                            className={`filter-pill ${filter === 'active' ? 'active' : ''}`}
                            onClick={() => setFilter('active')}
                        >
                            {t.users.filter.active}
                        </button>
                    </div>

                    {filteredUsers.map(user => (
                        <div key={user.id} className="user-card">
                            <div className={`user-avatar ${user.status === 'pending' ? 'pending' : ''}`}>
                                {user.status === 'pending' ? 'â³' : 'ðŸ‘¤'}
                            </div>
                            <div className="user-info">
                                <div className="user-name">{user.name[lang]}</div>
                                <div className="user-details">
                                    {t.users.apartment} {user.apartment} â€¢ {user.type === 'owner' ? 'ðŸ ' : 'ðŸ”‘'}
                                </div>
                            </div>
                            {user.status === 'pending' ? (
                                <div className="user-actions">
                                    <button
                                        className="user-action-btn approve"
                                        onClick={() => handleApprove(user.id)}
                                        title={t.users.approve}
                                    >
                                        âœ“
                                    </button>
                                    <button
                                        className="user-action-btn reject"
                                        onClick={() => handleReject(user.id)}
                                        title={t.users.reject}
                                    >
                                        âœ—
                                    </button>
                                </div>
                            ) : (
                                <span className={`user-status ${user.status}`}>
                                    {t.users.status[user.status]}
                                </span>
                            )}
                        </div>
                    ))}
                </div>
            );
        };

        // Faults Section for Admin
        const FaultsSection = () => {
            const { t, lang } = useLanguage();
            const [filter, setFilter] = useState('all');
            const [faults, setFaults] = useState([]);

            const filteredFaults = filter === 'all'
                ? faults
                : faults.filter(f => f.status === filter);

            const handleStatusChange = (id, newStatus) => {
                setFaults(prev => prev.map(f =>
                    f.id === id ? { ...f, status: newStatus } : f
                ));
            };

            const handleDelete = (id) => {
                if (confirm(lang === 'he' ? '×œ×ž×—×•×§ ××ª ×”×ª×§×œ×”?' : 'Delete this fault?')) {
                    setFaults(prev => prev.filter(f => f.id !== id));
                }
            };

            const statusLabels = {
                open: { he: '×¤×ª×•×—', en: 'Open', color: 'var(--color-danger)' },
                progress: { he: '×‘×˜×™×¤×•×œ', en: 'In Progress', color: 'var(--color-warning)' },
                fixed: { he: '×˜×•×¤×œ', en: 'Fixed', color: 'var(--color-success)' }
            };

            const categoryIcons = {
                water: 'ðŸ’§',
                electric: 'ðŸ’¡',
                elevator: 'ðŸ›—',
                cleaning: 'ðŸ§¹',
                door: 'ðŸšª',
                other: 'ðŸ“‹'
            };

            return (
                <div>
                    <div className="filter-pills" style={{ marginBottom: 'var(--space-md)' }}>
                        <button
                            className={`filter-pill ${filter === 'all' ? 'active' : ''}`}
                            onClick={() => setFilter('all')}
                        >
                            {t.faults.all} ({faults.length})
                        </button>
                        <button
                            className={`filter-pill ${filter === 'open' ? 'active' : ''}`}
                            onClick={() => setFilter('open')}
                        >
                            {t.faults.open} ({faults.filter(f => f.status === 'open').length})
                        </button>
                        <button
                            className={`filter-pill ${filter === 'progress' ? 'active' : ''}`}
                            onClick={() => setFilter('progress')}
                        >
                            {t.faults.inProgress} ({faults.filter(f => f.status === 'progress').length})
                        </button>
                        <button
                            className={`filter-pill ${filter === 'fixed' ? 'active' : ''}`}
                            onClick={() => setFilter('fixed')}
                        >
                            {t.faults.fixed} ({faults.filter(f => f.status === 'fixed').length})
                        </button>
                    </div>

                    {filteredFaults.length === 0 ? (
                        <div className="no-admins-message" style={{ padding: 'var(--space-2xl)', textAlign: 'center' }}>
                            <div style={{ fontSize: '3rem', marginBottom: 'var(--space-md)' }}>âœ…</div>
                            <div>{t.faults.empty}</div>
                        </div>
                    ) : (
                        filteredFaults.map(fault => (
                            <div key={fault.id} className="user-card" style={{ marginBottom: 'var(--space-sm)' }}>
                                <div className="user-avatar" style={{ background: 'var(--color-sand)' }}>
                                    {categoryIcons[fault.category] || 'ðŸ“‹'}
                                </div>
                                <div className="user-info">
                                    <div className="user-name">{fault.description}</div>
                                    <div className="user-details">
                                        {t.users.apartment} {fault.apartment} â€¢ {fault.date}
                                    </div>
                                </div>
                                <div style={{ display: 'flex', flexDirection: 'column', gap: 'var(--space-xs)', alignItems: 'flex-end' }}>
                                    <span style={{
                                        fontSize: '0.6875rem',
                                        fontWeight: 600,
                                        padding: 'var(--space-xs) var(--space-sm)',
                                        borderRadius: 'var(--radius-full)',
                                        background: statusLabels[fault.status].color + '20',
                                        color: statusLabels[fault.status].color
                                    }}>
                                        {statusLabels[fault.status][lang]}
                                    </span>
                                    <div style={{ display: 'flex', gap: 'var(--space-xs)' }}>
                                        {fault.status === 'open' && (
                                            <button
                                                className="user-action-btn approve"
                                                onClick={() => handleStatusChange(fault.id, 'progress')}
                                                title={t.faults.markProgress}
                                            >
                                                âš™ï¸
                                            </button>
                                        )}
                                        {fault.status === 'progress' && (
                                            <button
                                                className="user-action-btn approve"
                                                onClick={() => handleStatusChange(fault.id, 'fixed')}
                                                title={t.faults.markFixed}
                                            >
                                                âœ“
                                            </button>
                                        )}
                                        <button
                                            className="user-action-btn reject"
                                            onClick={() => handleDelete(fault.id)}
                                            title={t.faults.delete}
                                        >
                                            ðŸ—‘ï¸
                                        </button>
                                    </div>
                                </div>
                            </div>
                        ))
                    )}
                </div>
            );
        };

        // Notices Section for Admin
        const NoticesSection = () => {
            const { t, lang } = useLanguage();
            const [selectedTemplate, setSelectedTemplate] = useState(null);
            const [activeNotices, setActiveNotices] = useState([]);
            const [sendingStatus, setSendingStatus] = useState('idle');
            const [showCustomForm, setShowCustomForm] = useState(false);
            const [customTitle, setCustomTitle] = useState('');
            const [customContent, setCustomContent] = useState('');
            const [customType, setCustomType] = useState('info');

            const handleSelectTemplate = (template) => {
                setSelectedTemplate(template.id === selectedTemplate ? null : template.id);
                setSendingStatus('idle');
                setShowCustomForm(false);
            };

            const handleSendNotice = () => {
                if (!selectedTemplate) return;

                const template = t.notices.templateList.find(t => t.id === selectedTemplate);
                if (!template) return;

                setSendingStatus('sending');

                setTimeout(() => {
                    const newNotice = {
                        id: Date.now(),
                        icon: template.icon,
                        title: template.title,
                        type: template.type,
                        date: new Date().toLocaleDateString(lang === 'he' ? 'he-IL' : 'en-US')
                    };
                    setActiveNotices(prev => [newNotice, ...prev]);
                    setSendingStatus('sent');
                    setTimeout(() => {
                        setSelectedTemplate(null);
                        setSendingStatus('idle');
                    }, 1500);
                }, 500);
            };

            const handleSendCustomNotice = () => {
                if (!customTitle.trim()) return;

                const typeIcons = { urgent: 'âš ï¸', event: 'ðŸ“…', info: 'â„¹ï¸', maintenance: 'ðŸ”§' };

                const newNotice = {
                    id: Date.now(),
                    icon: typeIcons[customType],
                    title: customTitle,
                    content: customContent,
                    type: customType,
                    date: new Date().toLocaleDateString(lang === 'he' ? 'he-IL' : 'en-US')
                };
                setActiveNotices(prev => [newNotice, ...prev]);
                setCustomTitle('');
                setCustomContent('');
                setCustomType('info');
                setShowCustomForm(false);
            };

            const handleDeleteNotice = (id) => {
                setActiveNotices(prev => prev.filter(n => n.id !== id));
            };

            const typeLabels = {
                urgent: lang === 'he' ? '×“×—×•×£' : 'Urgent',
                event: lang === 'he' ? '××™×¨×•×¢' : 'Event',
                info: lang === 'he' ? '×ž×™×“×¢' : 'Info',
                maintenance: lang === 'he' ? '×ª×—×–×•×§×”' : 'Maintenance'
            };

            return (
                <div>
                    {/* Quick Templates */}
                    <div className="admin-management-card">
                        <div className="admin-section-title">{t.notices.templates}</div>
                        <div className="notices-templates-grid">
                            {t.notices.templateList.map(template => (
                                <div
                                    key={template.id}
                                    className={`template-card ${selectedTemplate === template.id ? 'selected' : ''}`}
                                    onClick={() => handleSelectTemplate(template)}
                                >
                                    <div className="template-icon">{template.icon}</div>
                                    <div className="template-title">{template.title}</div>
                                    <span className={`template-type ${template.type}`}>
                                        {typeLabels[template.type]}
                                    </span>
                                </div>
                            ))}
                        </div>

                        <button
                            className={`btn-send-notice ${sendingStatus === 'sent' ? 'sent' : ''}`}
                            onClick={handleSendNotice}
                            disabled={!selectedTemplate || sendingStatus === 'sending'}
                        >
                            {sendingStatus === 'sent' ? `âœ“ ${t.notices.sent}` : `ðŸ“¢ ${t.notices.send}`}
                        </button>
                    </div>

                    {/* Custom Notice */}
                    <div className="admin-management-card">
                        <div className="admin-section-title" style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>
                            <span>{lang === 'he' ? '×›×ª×™×‘×ª ×”×•×“×¢×” ×ž×•×ª××ž×ª' : 'Write Custom Notice'}</span>
                            <button
                                onClick={() => { setShowCustomForm(!showCustomForm); setSelectedTemplate(null); }}
                                style={{
                                    background: showCustomForm ? 'var(--color-primary)' : 'var(--color-sand)',
                                    color: showCustomForm ? 'white' : 'var(--color-text)',
                                    border: 'none',
                                    borderRadius: 'var(--radius-full)',
                                    padding: 'var(--space-xs) var(--space-md)',
                                    cursor: 'pointer',
                                    fontSize: '0.75rem',
                                    fontWeight: 600
                                }}
                            >
                                {showCustomForm ? 'âœ•' : 'âœï¸'}
                            </button>
                        </div>

                        {showCustomForm && (
                            <div style={{ marginTop: 'var(--space-md)' }}>
                                <div className="form-group">
                                    <label className="form-label">{lang === 'he' ? '×›×•×ª×¨×ª' : 'Title'}</label>
                                    <input
                                        type="text"
                                        className="form-input"
                                        value={customTitle}
                                        onChange={(e) => setCustomTitle(e.target.value)}
                                        placeholder={lang === 'he' ? '×”×›× ×¡ ×›×•×ª×¨×ª...' : 'Enter title...'}
                                    />
                                </div>
                                <div className="form-group">
                                    <label className="form-label">{lang === 'he' ? '×ª×•×›×Ÿ' : 'Content'}</label>
                                    <textarea
                                        className="form-input"
                                        value={customContent}
                                        onChange={(e) => setCustomContent(e.target.value)}
                                        placeholder={lang === 'he' ? '×”×›× ×¡ ×ª×•×›×Ÿ ×”×”×•×“×¢×”...' : 'Enter notice content...'}
                                        rows={4}
                                        style={{ resize: 'vertical' }}
                                    />
                                </div>
                                <div className="form-group">
                                    <label className="form-label">{lang === 'he' ? '×¡×•×’' : 'Type'}</label>
                                    <select
                                        className="form-select"
                                        value={customType}
                                        onChange={(e) => setCustomType(e.target.value)}
                                        style={{ width: '100%', padding: 'var(--space-md)', borderRadius: 'var(--radius-md)', border: '2px solid var(--color-sand-dark)' }}
                                    >
                                        <option value="info">{typeLabels.info}</option>
                                        <option value="urgent">{typeLabels.urgent}</option>
                                        <option value="event">{typeLabels.event}</option>
                                        <option value="maintenance">{typeLabels.maintenance}</option>
                                    </select>
                                </div>
                                <button
                                    className="btn-send-notice"
                                    onClick={handleSendCustomNotice}
                                    disabled={!customTitle.trim()}
                                >
                                    ðŸ“¢ {t.notices.send}
                                </button>
                            </div>
                        )}
                    </div>

                    {/* Active Notices */}
                    <div className="admin-management-card">
                        <div className="admin-section-title">{t.notices.active}</div>
                        {activeNotices.length === 0 ? (
                            <div className="no-admins-message">{t.notices.noActive}</div>
                        ) : (
                            <div className="active-notices-list">
                                {activeNotices.map(notice => (
                                    <div key={notice.id} className="active-notice-card">
                                        <div className="active-notice-icon">{notice.icon}</div>
                                        <div className="active-notice-info">
                                            <div className="active-notice-title">{notice.title}</div>
                                            <div className="active-notice-date">{notice.date}</div>
                                        </div>
                                        <button
                                            className="btn-delete"
                                            onClick={() => handleDeleteNotice(notice.id)}
                                        >
                                            {t.notices.delete}
                                        </button>
                                    </div>
                                ))}
                            </div>
                        )}
                    </div>
                </div>
            );
        };

        // Polls Section for Admin
        const PollsSection = () => {
            const { t, lang } = useLanguage();
            const [polls, setPolls] = useState([]);
            const [showForm, setShowForm] = useState(false);
            const [question, setQuestion] = useState('');
            const [options, setOptions] = useState(['', '']);

            const handleAddOption = () => {
                if (options.length < 6) {
                    setOptions([...options, '']);
                }
            };

            const handleOptionChange = (index, value) => {
                const newOptions = [...options];
                newOptions[index] = value;
                setOptions(newOptions);
            };

            const handleRemoveOption = (index) => {
                if (options.length > 2) {
                    setOptions(options.filter((_, i) => i !== index));
                }
            };

            const handleCreatePoll = () => {
                if (!question.trim() || options.filter(o => o.trim()).length < 2) return;

                const newPoll = {
                    id: Date.now(),
                    question: question.trim(),
                    options: options.filter(o => o.trim()).map((text, i) => ({
                        id: `opt_${i}`,
                        text,
                        votes: 0
                    })),
                    isActive: true,
                    totalVotes: 0,
                    createdAt: new Date().toLocaleDateString(lang === 'he' ? 'he-IL' : 'en-US')
                };

                setPolls([newPoll, ...polls]);
                setQuestion('');
                setOptions(['', '']);
                setShowForm(false);
            };

            const handleClosePoll = (id) => {
                setPolls(polls.map(p => p.id === id ? { ...p, isActive: false } : p));
            };

            const handleDeletePoll = (id) => {
                if (confirm(lang === 'he' ? '×œ×ž×—×•×§ ××ª ×”×¡×§×¨?' : 'Delete this poll?')) {
                    setPolls(polls.filter(p => p.id !== id));
                }
            };

            return (
                <div>
                    {/* Create Poll Form */}
                    <div className="admin-management-card">
                        <div className="admin-section-title" style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>
                            <span>{t.polls.create}</span>
                            <button
                                onClick={() => setShowForm(!showForm)}
                                style={{
                                    background: showForm ? 'var(--color-primary)' : 'var(--color-sand)',
                                    color: showForm ? 'white' : 'var(--color-text)',
                                    border: 'none',
                                    borderRadius: 'var(--radius-full)',
                                    padding: 'var(--space-xs) var(--space-md)',
                                    cursor: 'pointer',
                                    fontSize: '0.75rem',
                                    fontWeight: 600
                                }}
                            >
                                {showForm ? 'âœ•' : 'âž•'}
                            </button>
                        </div>

                        {showForm && (
                            <div style={{ marginTop: 'var(--space-md)' }}>
                                <div className="form-group">
                                    <label className="form-label">{t.polls.question}</label>
                                    <input
                                        type="text"
                                        className="form-input"
                                        value={question}
                                        onChange={(e) => setQuestion(e.target.value)}
                                        placeholder={t.polls.placeholder}
                                    />
                                </div>
                                <div className="form-group">
                                    <label className="form-label">{t.polls.options}</label>
                                    {options.map((opt, index) => (
                                        <div key={index} style={{ display: 'flex', gap: 'var(--space-sm)', marginBottom: 'var(--space-sm)' }}>
                                            <input
                                                type="text"
                                                className="form-input"
                                                value={opt}
                                                onChange={(e) => handleOptionChange(index, e.target.value)}
                                                placeholder={`${t.polls.optionPlaceholder} ${index + 1}`}
                                                style={{ flex: 1 }}
                                            />
                                            {options.length > 2 && (
                                                <button
                                                    onClick={() => handleRemoveOption(index)}
                                                    style={{
                                                        background: 'var(--color-danger-bg)',
                                                        color: 'var(--color-danger)',
                                                        border: 'none',
                                                        borderRadius: 'var(--radius-sm)',
                                                        width: '40px',
                                                        cursor: 'pointer'
                                                    }}
                                                >
                                                    âœ•
                                                </button>
                                            )}
                                        </div>
                                    ))}
                                    {options.length < 6 && (
                                        <button
                                            onClick={handleAddOption}
                                            style={{
                                                background: 'var(--color-sand)',
                                                border: 'none',
                                                borderRadius: 'var(--radius-sm)',
                                                padding: 'var(--space-sm) var(--space-md)',
                                                cursor: 'pointer',
                                                fontSize: '0.8125rem'
                                            }}
                                        >
                                            âž• {t.polls.addOption}
                                        </button>
                                    )}
                                </div>
                                <button
                                    className="btn-send-notice"
                                    onClick={handleCreatePoll}
                                    disabled={!question.trim() || options.filter(o => o.trim()).length < 2}
                                >
                                    ðŸ“Š {t.polls.create}
                                </button>
                            </div>
                        )}
                    </div>

                    {/* Active Polls */}
                    <div className="admin-management-card">
                        <div className="admin-section-title">{t.polls.active}</div>
                        {polls.filter(p => p.isActive).length === 0 ? (
                            <div className="no-admins-message">{t.polls.empty}</div>
                        ) : (
                            polls.filter(p => p.isActive).map(poll => (
                                <div key={poll.id} className="active-notice-card" style={{ flexDirection: 'column', alignItems: 'stretch' }}>
                                    <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: 'var(--space-sm)' }}>
                                        <strong>{poll.question}</strong>
                                        <span style={{ fontSize: '0.75rem', color: 'var(--color-text-muted)' }}>{poll.createdAt}</span>
                                    </div>
                                    {poll.options.map(opt => (
                                        <div key={opt.id} style={{
                                            display: 'flex',
                                            justifyContent: 'space-between',
                                            padding: 'var(--space-xs) var(--space-sm)',
                                            background: 'var(--color-sand)',
                                            borderRadius: 'var(--radius-sm)',
                                            marginBottom: 'var(--space-xs)',
                                            fontSize: '0.875rem'
                                        }}>
                                            <span>{opt.text}</span>
                                            <span style={{ fontWeight: 600 }}>{opt.votes} {t.polls.votes}</span>
                                        </div>
                                    ))}
                                    <div style={{ display: 'flex', gap: 'var(--space-sm)', marginTop: 'var(--space-sm)' }}>
                                        <button className="btn-delete" onClick={() => handleClosePoll(poll.id)}>
                                            {t.polls.close}
                                        </button>
                                        <button className="btn-delete" onClick={() => handleDeletePoll(poll.id)}>
                                            {t.polls.delete}
                                        </button>
                                    </div>
                                </div>
                            ))
                        )}
                    </div>
                </div>
            );
        };

        // Professionals Section for Admin
        const ProfessionalsSection = () => {
            const { t, lang } = useLanguage();
            const [professionals, setProfessionals] = useState([]);
            const [filter, setFilter] = useState('all');
            const [showForm, setShowForm] = useState(false);
            const [formData, setFormData] = useState({ name: '', profession: 'plumber', phone: '', description: '' });

            const professionIcons = {
                plumber: 'ðŸ”§',
                electrician: 'âš¡',
                handyman: 'ðŸ› ï¸',
                cleaner: 'ðŸ§¹',
                painter: 'ðŸŽ¨',
                locksmith: 'ðŸ”‘',
                ac: 'â„ï¸',
                other: 'ðŸ‘·'
            };

            const handleAddProfessional = () => {
                if (!formData.name.trim() || !formData.phone.trim()) return;

                const newPro = {
                    id: Date.now(),
                    ...formData,
                    isApproved: true, // Admin adds directly as approved
                    rating: 0,
                    ratingCount: 0,
                    createdAt: new Date().toLocaleDateString(lang === 'he' ? 'he-IL' : 'en-US')
                };

                setProfessionals([newPro, ...professionals]);
                setFormData({ name: '', profession: 'plumber', phone: '', description: '' });
                setShowForm(false);
            };

            const handleApprove = (id) => {
                setProfessionals(professionals.map(p => p.id === id ? { ...p, isApproved: true } : p));
            };

            const handleDelete = (id) => {
                if (confirm(lang === 'he' ? '×œ×ž×—×•×§?' : 'Delete?')) {
                    setProfessionals(professionals.filter(p => p.id !== id));
                }
            };

            const filteredPros = filter === 'all' ? professionals :
                filter === 'pending' ? professionals.filter(p => !p.isApproved) :
                professionals.filter(p => p.isApproved);

            return (
                <div>
                    {/* Add Professional Form */}
                    <div className="admin-management-card">
                        <div className="admin-section-title" style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>
                            <span>{t.professionals.add}</span>
                            <button
                                onClick={() => setShowForm(!showForm)}
                                style={{
                                    background: showForm ? 'var(--color-primary)' : 'var(--color-sand)',
                                    color: showForm ? 'white' : 'var(--color-text)',
                                    border: 'none',
                                    borderRadius: 'var(--radius-full)',
                                    padding: 'var(--space-xs) var(--space-md)',
                                    cursor: 'pointer',
                                    fontSize: '0.75rem',
                                    fontWeight: 600
                                }}
                            >
                                {showForm ? 'âœ•' : 'âž•'}
                            </button>
                        </div>

                        {showForm && (
                            <div style={{ marginTop: 'var(--space-md)' }}>
                                <div className="form-group">
                                    <label className="form-label">{t.professionals.name}</label>
                                    <input
                                        type="text"
                                        className="form-input"
                                        value={formData.name}
                                        onChange={(e) => setFormData({ ...formData, name: e.target.value })}
                                    />
                                </div>
                                <div className="form-group">
                                    <label className="form-label">{t.professionals.profession}</label>
                                    <select
                                        className="form-select"
                                        value={formData.profession}
                                        onChange={(e) => setFormData({ ...formData, profession: e.target.value })}
                                        style={{ width: '100%', padding: 'var(--space-md)', borderRadius: 'var(--radius-md)', border: '2px solid var(--color-sand-dark)' }}
                                    >
                                        {Object.keys(professionIcons).map(key => (
                                            <option key={key} value={key}>{professionIcons[key]} {t.professionals.professions[key]}</option>
                                        ))}
                                    </select>
                                </div>
                                <div className="form-group">
                                    <label className="form-label">{t.professionals.phone}</label>
                                    <input
                                        type="tel"
                                        className="form-input"
                                        value={formData.phone}
                                        onChange={(e) => setFormData({ ...formData, phone: e.target.value })}
                                        dir="ltr"
                                    />
                                </div>
                                <div className="form-group">
                                    <label className="form-label">{t.professionals.description}</label>
                                    <textarea
                                        className="form-input"
                                        value={formData.description}
                                        onChange={(e) => setFormData({ ...formData, description: e.target.value })}
                                        rows={2}
                                        style={{ resize: 'vertical' }}
                                    />
                                </div>
                                <button
                                    className="btn-send-notice"
                                    onClick={handleAddProfessional}
                                    disabled={!formData.name.trim() || !formData.phone.trim()}
                                >
                                    ðŸ‘· {t.professionals.add}
                                </button>
                            </div>
                        )}
                    </div>

                    {/* Professionals List */}
                    <div className="admin-management-card">
                        <div className="filter-pills" style={{ marginBottom: 'var(--space-md)' }}>
                            <button className={`filter-pill ${filter === 'all' ? 'active' : ''}`} onClick={() => setFilter('all')}>
                                {lang === 'he' ? '×”×›×œ' : 'All'} ({professionals.length})
                            </button>
                            <button className={`filter-pill ${filter === 'pending' ? 'active' : ''}`} onClick={() => setFilter('pending')}>
                                {t.professionals.pending} ({professionals.filter(p => !p.isApproved).length})
                            </button>
                            <button className={`filter-pill ${filter === 'approved' ? 'active' : ''}`} onClick={() => setFilter('approved')}>
                                {t.professionals.approved} ({professionals.filter(p => p.isApproved).length})
                            </button>
                        </div>

                        {filteredPros.length === 0 ? (
                            <div className="no-admins-message">{t.professionals.empty}</div>
                        ) : (
                            filteredPros.map(pro => (
                                <div key={pro.id} className="user-card">
                                    <div className="user-avatar" style={{ background: 'var(--color-sand)' }}>
                                        {professionIcons[pro.profession]}
                                    </div>
                                    <div className="user-info">
                                        <div className="user-name">{pro.name}</div>
                                        <div className="user-details">
                                            {t.professionals.professions[pro.profession]} â€¢ {pro.phone}
                                        </div>
                                    </div>
                                    <div style={{ display: 'flex', gap: 'var(--space-xs)' }}>
                                        {!pro.isApproved && (
                                            <button className="user-action-btn approve" onClick={() => handleApprove(pro.id)}>âœ“</button>
                                        )}
                                        <button className="user-action-btn reject" onClick={() => handleDelete(pro.id)}>ðŸ—‘ï¸</button>
                                    </div>
                                </div>
                            ))
                        )}
                    </div>
                </div>
            );
        };

        // Marketplace Section for Admin
        const MarketplaceSection = () => {
            const { t, lang } = useLanguage();
            const [items, setItems] = useState([]);
            const [filter, setFilter] = useState('all');

            const categoryIcons = {
                sell: 'ðŸ·ï¸',
                buy: 'ðŸ›’',
                give: 'ðŸŽ',
                seek: 'ðŸ”'
            };

            const handleDelete = (id) => {
                if (confirm(lang === 'he' ? '×œ×ž×—×•×§ ×ž×•×“×¢×”?' : 'Delete listing?')) {
                    setItems(items.filter(i => i.id !== id));
                }
            };

            const filteredItems = filter === 'all' ? items : items.filter(i => i.category === filter);

            return (
                <div>
                    <div className="admin-management-card">
                        <div className="admin-section-title">{t.marketplace.title}</div>

                        <div className="filter-pills" style={{ marginBottom: 'var(--space-md)' }}>
                            <button className={`filter-pill ${filter === 'all' ? 'active' : ''}`} onClick={() => setFilter('all')}>
                                {t.marketplace.all} ({items.length})
                            </button>
                            {Object.keys(categoryIcons).map(cat => (
                                <button
                                    key={cat}
                                    className={`filter-pill ${filter === cat ? 'active' : ''}`}
                                    onClick={() => setFilter(cat)}
                                >
                                    {categoryIcons[cat]} {t.marketplace[cat]}
                                </button>
                            ))}
                        </div>

                        {filteredItems.length === 0 ? (
                            <div className="no-admins-message">{t.marketplace.empty}</div>
                        ) : (
                            filteredItems.map(item => (
                                <div key={item.id} className="user-card">
                                    <div className="user-avatar" style={{ background: 'var(--color-sand)' }}>
                                        {categoryIcons[item.category]}
                                    </div>
                                    <div className="user-info">
                                        <div className="user-name">{item.title}</div>
                                        <div className="user-details">
                                            {item.price && `â‚ª${item.price} â€¢ `}{t.marketplace.by} {item.userName}
                                        </div>
                                    </div>
                                    <button className="user-action-btn reject" onClick={() => handleDelete(item.id)}>ðŸ—‘ï¸</button>
                                </div>
                            ))
                        )}
                    </div>
                </div>
            );
        };

        // Admin verification helper
        const getConfig = () => {
            return window.APP_CONFIG || {
                ADMIN_EMAIL: '',
                ADMIN_EMAILS: [],
                BUILDING_NAME: '×ž×’×“×œ×™ ×”×™×',
                BUILDING_NAME_EN: 'Sea Towers',
                INVITATION_SECRET: ''
            };
        };

        const generateInviteToken = () => {
            const config = getConfig();
            const timestamp = Date.now();
            const expiry = timestamp + (24 * 60 * 60 * 1000); // 24 hours
            const payload = {
                type: 'admin_invite',
                expiry: expiry,
                secret: config.INVITATION_SECRET
            };
            // Simple base64 encoding (in production use proper JWT)
            const token = btoa(JSON.stringify(payload));
            return token;
        };

        const AdminsSection = () => {
            const { t, lang } = useLanguage();
            const [inviteLink, setInviteLink] = useState('');
            const [copied, setCopied] = useState(false);
            const config = getConfig();

            const mainAdmin = config.ADMIN_EMAIL;
            const additionalAdmins = config.ADMIN_EMAILS || [];

            // Mock current user email (in real app, get from auth)
            const currentUserEmail = mainAdmin;

            const handleGenerateLink = () => {
                const token = generateInviteToken();
                const baseUrl = window.location.origin + window.location.pathname.replace('admin.html', '');
                const link = `${baseUrl}auth.html?invite=${token}`;
                setInviteLink(link);
                setCopied(false);
            };

            const handleCopyLink = async () => {
                try {
                    await navigator.clipboard.writeText(inviteLink);
                    setCopied(true);
                    setTimeout(() => setCopied(false), 3000);
                } catch (err) {
                    // Fallback for older browsers
                    const textArea = document.createElement('textarea');
                    textArea.value = inviteLink;
                    document.body.appendChild(textArea);
                    textArea.select();
                    document.execCommand('copy');
                    document.body.removeChild(textArea);
                    setCopied(true);
                    setTimeout(() => setCopied(false), 3000);
                }
            };

            return (
                <div>
                    <div className="admin-management-card">
                        <div className="admin-section-title">{t.admins.mainAdmin}</div>
                        <div className="admin-list-item main-admin">
                            <div className="admin-avatar">ðŸ‘‘</div>
                            <div className="admin-info">
                                <div className="admin-email">{mainAdmin || 'Not configured'}</div>
                                <div className="admin-role">
                                    ðŸ” {t.admins.mainAdmin}
                                    {mainAdmin === currentUserEmail && (
                                        <span className="admin-you-badge">{t.admins.you}</span>
                                    )}
                                </div>
                            </div>
                        </div>

                        <div className="admin-section-title" style={{ marginTop: 'var(--space-lg)' }}>
                            {t.admins.additionalAdmins}
                        </div>
                        {additionalAdmins.length > 0 ? (
                            additionalAdmins.map((email, index) => (
                                <div key={index} className="admin-list-item">
                                    <div className="admin-avatar">ðŸ‘¤</div>
                                    <div className="admin-info">
                                        <div className="admin-email">{email}</div>
                                        <div className="admin-role">
                                            ðŸ›¡ï¸ {lang === 'he' ? '×ž× ×”×œ' : 'Admin'}
                                            {email === currentUserEmail && (
                                                <span className="admin-you-badge">{t.admins.you}</span>
                                            )}
                                        </div>
                                    </div>
                                </div>
                            ))
                        ) : (
                            <div className="no-admins-message">{t.admins.noAdditional}</div>
                        )}
                    </div>

                    <div className="invite-section">
                        <div className="invite-title">âœ‰ï¸ {t.admins.inviteTitle}</div>
                        <div className="invite-instructions">{t.admins.inviteInstructions}</div>

                        {!inviteLink ? (
                            <button className="btn-generate" onClick={handleGenerateLink}>
                                ðŸ”— {t.admins.generateLink}
                            </button>
                        ) : (
                            <>
                                <div className="invite-link-container">
                                    <div className="invite-link-text">{inviteLink}</div>
                                    <div className="invite-link-expiry">â±ï¸ {t.admins.linkExpiry}</div>
                                </div>
                                <button
                                    className={`btn-copy ${copied ? 'copied' : ''}`}
                                    onClick={handleCopyLink}
                                >
                                    {copied ? `âœ“ ${t.admins.copied}` : `ðŸ“‹ ${t.admins.copyLink}`}
                                </button>
                            </>
                        )}
                    </div>
                </div>
            );
        };

        const AddExpenseModal = ({ isOpen, onClose }) => {
            const { t } = useLanguage();

            return (
                <div className={`modal-overlay ${isOpen ? 'active' : ''}`} onClick={onClose}>
                    <div className="modal-content" onClick={e => e.stopPropagation()}>
                        <div className="modal-header">
                            <h2 className="modal-title">{t.expenses.form.title}</h2>
                            <button className="modal-close" onClick={onClose}>âœ•</button>
                        </div>
                        <div className="modal-body">
                            <div className="form-group">
                                <label className="form-label">{t.expenses.form.category}</label>
                                <select className="form-select">
                                    {Object.entries(t.expenses.categories).map(([key, label]) => (
                                        <option key={key} value={key}>{categoryIcons[key]} {label}</option>
                                    ))}
                                </select>
                            </div>
                            <div className="form-group">
                                <label className="form-label">{t.expenses.form.amount}</label>
                                <input type="number" className="form-input" placeholder="â‚ª" dir="ltr" />
                            </div>
                            <div className="form-group">
                                <label className="form-label">{t.expenses.form.description}</label>
                                <input type="text" className="form-input" />
                            </div>
                            <div className="form-group">
                                <label className="form-label">{t.expenses.form.receipt}</label>
                                <div className="file-upload">
                                    <div className="file-upload-icon">ðŸ“·</div>
                                    <div className="file-upload-text">{t.expenses.form.uploadReceipt}</div>
                                </div>
                            </div>
                            <button className="btn-submit">{t.expenses.form.submit}</button>
                        </div>
                    </div>
                </div>
            );
        };

        const BottomNav = ({ onNavigate }) => {
            const { t } = useLanguage();
            const navItems = [
                { id: 'dashboard', icon: 'ðŸ“Š', label: t.nav.dashboard, action: () => onNavigate('finance') },
                { id: 'residents', icon: 'ðŸ ', label: t.nav.residents, action: () => onNavigate('users') },
                { id: 'faults', icon: 'ðŸ”§', label: t.nav.faults || '×ª×§×œ×•×ª', action: () => onNavigate('faults') },
                { id: 'exit', icon: 'ðŸšª', label: t.nav.exit, href: 'index.html' }
            ];

            return (
                <nav className="bottom-nav">
                    {navItems.map(item => (
                        item.href ? (
                            <a
                                key={item.id}
                                href={item.href}
                                className="nav-item"
                            >
                                <span className="nav-icon">{item.icon}</span>
                                <span className="nav-label">{item.label}</span>
                            </a>
                        ) : (
                            <button
                                key={item.id}
                                className="nav-item"
                                onClick={item.action}
                                style={{ background: 'none', border: 'none', cursor: 'pointer' }}
                            >
                                <span className="nav-icon">{item.icon}</span>
                                <span className="nav-label">{item.label}</span>
                            </button>
                        )
                    ))}
                </nav>
            );
        };

        const App = () => {
            const { t, lang } = useLanguage();
            const [activeTab, setActiveTab] = useState('finance');
            const [showExpenseModal, setShowExpenseModal] = useState(false);
            const config = getConfig();
            const buildingName = lang === 'he' ? config.BUILDING_NAME : config.BUILDING_NAME_EN;

            const tabs = [
                { id: 'finance', icon: 'ðŸ’°', label: t.tabs.finance },
                { id: 'debtors', icon: 'ðŸ“‹', label: t.tabs.debtors },
                { id: 'expenses', icon: 'ðŸ§¾', label: t.tabs.expenses },
                { id: 'users', icon: 'ðŸ‘¥', label: t.tabs.users },
                { id: 'faults', icon: 'ðŸ”§', label: t.tabs.faults },
                { id: 'notices', icon: 'ðŸ“¢', label: t.tabs.notices },
                { id: 'polls', icon: 'ðŸ“Š', label: t.tabs.polls },
                { id: 'professionals', icon: 'ðŸ‘·', label: t.tabs.professionals },
                { id: 'marketplace', icon: 'ðŸ›’', label: t.tabs.marketplace },
                { id: 'admins', icon: 'ðŸ‘‘', label: t.tabs.admins }
            ];

            return (
                <div className="app-container">
                    <header className="page-header">
                        <div className="header-top">
                            <h1 className="page-title">{t.title}</h1>
                            <span className="admin-badge">ðŸ‘‘ {t.admin}</span>
                        </div>
                        <div className="building-info">ðŸ¢ {buildingName}</div>
                    </header>

                    <div className="stats-row">
                        <div className="stat-card">
                            <div className="stat-value positive">â‚ª0</div>
                            <div className="stat-label">{t.stats.balance}</div>
                        </div>
                        <div className="stat-card">
                            <div className="stat-value neutral">0</div>
                            <div className="stat-label">{t.stats.debtors}</div>
                        </div>
                        <div className="stat-card">
                            <div className="stat-value neutral">0</div>
                            <div className="stat-label">{t.stats.apartments}</div>
                        </div>
                    </div>

                    <div className="section-tabs">
                        {tabs.map(tab => (
                            <button
                                key={tab.id}
                                className={`section-tab ${activeTab === tab.id ? 'active' : ''}`}
                                onClick={() => setActiveTab(tab.id)}
                            >
                                {tab.icon} {tab.label}
                                {tab.badge && <span className="tab-badge">{tab.badge}</span>}
                            </button>
                        ))}
                    </div>

                    <main className="main-content">
                        {activeTab === 'finance' && <FinanceSection />}
                        {activeTab === 'debtors' && <DebtorsSection />}
                        {activeTab === 'expenses' && <ExpensesSection onAdd={() => setShowExpenseModal(true)} />}
                        {activeTab === 'users' && <UsersSection />}
                        {activeTab === 'faults' && <FaultsSection />}
                        {activeTab === 'notices' && <NoticesSection />}
                        {activeTab === 'polls' && <PollsSection />}
                        {activeTab === 'professionals' && <ProfessionalsSection />}
                        {activeTab === 'marketplace' && <MarketplaceSection />}
                        {activeTab === 'admins' && <AdminsSection />}
                    </main>

                    <BottomNav onNavigate={setActiveTab} />

                    <AddExpenseModal
                        isOpen={showExpenseModal}
                        onClose={() => setShowExpenseModal(false)}
                    />
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(
            <LanguageProvider>
                <App />
            </LanguageProvider>
        );
    </script>
</body>
</html>
